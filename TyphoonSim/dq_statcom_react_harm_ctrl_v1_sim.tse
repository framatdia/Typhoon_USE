version = 4.2

//
// Saved by sw version: 2025.1 SP1
//

model "dq_statcom_react_harm_ctrl_v1_sim" {
    configuration {
        hil_device = "VHIL+"
        hil_configuration_id = 1
        simulation_method = trapezoidal
        simulation_time_step = 1e-6
        simulation_discret_scaling = 1.0
        dsp_timer_periods = 100e-6, 50e-3
        ss_calc_method = "systematic elimination"
        enb_pole_shift = True
        enb_gds_oversampling = True
        show_modes = False
        device_ao_limit_enable = False
        reset_analog_outputs_on_sim_stop = True
        reset_analog_outputs_on_sim_stop_mode = Offset values
        reset_digital_outputs_on_sim_stop = True
        vhil_adio_loopback = False
        cpl_stb = False
        enb_dep_sw_detect = False
        code_section = "internal memory"
        data_section = "internal memory"
        sys_sp_rate_1 = 0.0001
        sys_sp_rate_2 = 0.05
        sys_real_type_precision = "default"
        user_real_type_precision = "default"
        sys_cpu_optimization = "high"
        user_cpu_optimization = "high"
        user_cpu_part_option = "default"
        matrix_based_reduction = True
        cpl_dynamics_analysis = False
        export_ss_to_pickle = False
        ground_scope_core = False
        dss_num_tol = 1e-15
        cce_platform = "generic"
        cce_use_relative_names = False
        cce_type_mapping_real = "double"
        cce_type_mapping_uint = "unsigned int"
        cce_type_mapping_int = "int"
        cce_platform = "generic"
        cce_use_relative_names = False
        cce_type_mapping_real = "double"
        cce_type_mapping_uint = "unsigned int"
        cce_type_mapping_int = "int"
        cce_term_var_location = "local"
        cce_directory = ""
        cce_custom_type_int = ""
        cce_custom_type_uint = ""
        cce_custom_type_real = ""
        tunable_params = "component defined"
        sp_compiler_type = "C compiler"
        sig_stim = "off"
        export_resource_list = ""
        export_dependency_list = ""
        excluded_resource_list = ""
        excluded_component_from_locking_list = ""
        export_out_file = ""
        export_lock_top_level = True
        export_encrypt_library = True
        export_encrypt_resources = True
        solver_type = "DAE"
        integration_method = "BDF"
        max_sim_step = 1e-4
        simulation_time = 2
        abs_tol = 1e-3
        rel_tol = 1e-3
        init_sim_step = 1e-6
        r_on_sw = 1e-3
        v_on_diode = 0.2
        data_sampling_rate = 0
        feedthrough_validation_error_level = warning
    }

    component Subsystem Root {
        component "core/Scope" Powers {
            selected_signals = "[\"p\", \"q\", \"p_fil\", \"q_fil\", \"Controller.p_ref\", \"Controller.q_ref\"]"
            signals_data = "{\"signals\": {\"p\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#00CC00\"}, \"display\": {\"1\": \"solid\"}}, \"p_fil\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#0099FF\"}, \"display\": {\"1\": \"solid\"}}, \"Controller.p_ref\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#FF0000\"}, \"display\": {\"1\": \"solid\"}}, \"q\": {\"viewports\": [2], \"type\": \"analog\", \"color\": {\"2\": \"#00CC00\"}, \"display\": {\"2\": \"solid\"}}, \"q_fil\": {\"viewports\": [2], \"type\": \"analog\", \"color\": {\"2\": \"#FF0000\"}, \"display\": {\"2\": \"solid\"}}, \"Controller.q_ref\": {\"viewports\": [2], \"type\": \"analog\", \"color\": {\"2\": \"#0099FF\"}, \"display\": {\"2\": \"solid\"}}}, \"viewports\": {\"1\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"2\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"3\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"4\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}}, \"plot_settings\": {\"layout\": \"Vertical\", \"background_color\": \"white\", \"legend_visible\": true}}"
        }
        [
            position = 8708, 8656
        ]

        component "core/Probe" p {
            execution_rate = "Ts_Control"
            signal_access = "Inherit"
        }
        [
            position = 8588, 8540
        ]

        component "core/Probe" q {
            execution_rate = "Ts_Control"
            signal_access = "Inherit"
            signal_name = "q"
        }
        [
            position = 8592, 8608
        ]

        component "core/Probe" p_fil {
            execution_rate = "Ts_Control"
            signal_access = "Inherit"
        }
        [
            position = 8588, 8680
        ]

        component "core/Scope" is_abc {
            selected_signals = "[\"is_a\", \"is_b\", \"is_c\", \"Controller.eta_a\", \"Controller.eta_b\", \"Controller.eta_c\"]"
            signals_data = "{\"signals\": {\"is_a\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#0099FF\"}, \"display\": {\"1\": \"solid\"}}, \"is_b\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#FFCC00\"}, \"display\": {\"1\": \"solid\"}}, \"is_c\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#FF00FF\"}, \"display\": {\"1\": \"solid\"}}, \"Controller.eta_a\": {\"viewports\": [2], \"type\": \"analog\", \"color\": {\"2\": \"#FF0000\"}, \"display\": {\"2\": \"solid\"}}, \"Controller.eta_b\": {\"viewports\": [2], \"type\": \"analog\", \"color\": {\"2\": \"#00CC00\"}, \"display\": {\"2\": \"solid\"}}, \"Controller.eta_c\": {\"viewports\": [2], \"type\": \"analog\", \"color\": {\"2\": \"#0099FF\"}, \"display\": {\"2\": \"solid\"}}}, \"viewports\": {\"1\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"2\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"3\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"4\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}}, \"plot_settings\": {\"layout\": \"Vertical\", \"background_color\": \"white\", \"legend_visible\": true}}"
        }
        [
            position = 9120, 8644
        ]

        component "core/Probe" is_a {
            execution_rate = "Ts_Control"
            signal_access = "Inherit"
        }
        [
            position = 8996, 8580
        ]

        component "core/Probe" is_b {
            execution_rate = "Ts_Control"
            signal_access = "Inherit"
        }
        [
            position = 8996, 8644
        ]

        component "core/Probe" is_c {
            execution_rate = "Ts_Control"
            signal_access = "Inherit"
        }
        [
            position = 8996, 8712
        ]

        component Subsystem Controller {
            layout = dynamic
            component "core/Scope" "Reference Tracking" {
                selected_signals = "[\"Controller.is_d_ref\", \"Controller.is_d\", \"Controller.is_q_ref\", \"Controller.is_q\", \"Controller.v_d\", \"Controller.v_q\"]"
                signals_data = "{\"signals\": {\"Controller.is_d_ref\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#FF0000\"}, \"display\": {\"1\": \"solid\"}}, \"Controller.is_d\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#00CC00\"}, \"display\": {\"1\": \"solid\"}}, \"Controller.is_q_ref\": {\"viewports\": [2], \"type\": \"analog\", \"color\": {\"2\": \"#FF0000\"}, \"display\": {\"2\": \"solid\"}}, \"Controller.is_q\": {\"viewports\": [2], \"type\": \"analog\", \"color\": {\"2\": \"#00CC00\"}, \"display\": {\"2\": \"solid\"}}, \"Controller.v_d\": {\"viewports\": [3], \"type\": \"analog\", \"color\": {\"3\": \"#FF0000\"}, \"display\": {\"3\": \"solid\"}}, \"Controller.v_q\": {\"viewports\": [3], \"type\": \"analog\", \"color\": {\"3\": \"#00CC00\"}, \"display\": {\"3\": \"solid\"}}}, \"viewports\": {\"1\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"2\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"3\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"4\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}}, \"plot_settings\": {\"layout\": \"Vertical\", \"background_color\": \"white\", \"legend_visible\": true}}"
            }
            [
                position = 9484, 7848
            ]

            component "core/Probe" v_d {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 6892, 7328
            ]

            component "core/Probe" v_q {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 6884, 7448
            ]

            component "core/C function" "C function abc to dq" {
                arb_defs = "/*Begin code section*/

/*End code section*/"
                execution_rate = "Ts_Control"
                input_terminals = "real abc;real theta;"
                input_terminals_dimensions = "3;1"
                input_terminals_feedthrough = "True;True"
                input_terminals_show_labels = "False;False"
                output_fnc = "/*Begin code section*/
d= 2.0/3.0*(cos(theta)*abc[0] + cos(theta - 2.0/3.0*M_PI)*abc[1]  + cos(theta + 2.0/3.0*M_PI)*abc[2] );
q = 2.0/3.0*(-sin(theta)*abc[0] - sin(theta - 2.0/3.0*M_PI)*abc[1]  - sin(theta + 2.0/3.0*M_PI)*abc[2] );
/*End code section*/"
                output_terminals = "real d;real q;"
                output_terminals_dimensions = "1;1"
                output_terminals_feedthrough = "True;True"
                output_terminals_show_labels = "False;False"
            }
            [
                position = 6568, 7816
                size = 176, 152
            ]

            component "core/Bus Join" "Bus Join3" {
                execution_rate = "Ts_Control"
                inputs = "3"
            }
            [
                position = 6384, 7764
            ]

            component "core/C function" "C function PLL" {
                arb_defs = "/*Begin code section*/

/*End code section*/"
                execution_rate = "Ts_Control"
                global_variables = "real y_q;real theta;"
                init_fnc = "/*Begin code section*/
y_q = 0;
theta = 0;
/*End code section*/"
                input_terminals = "real abc;"
                input_terminals_dimensions = "3"
                input_terminals_feedthrough = "True"
                input_terminals_show_labels = "False"
                output_fnc = "/*Begin code section*/
// dq transformation
d= 2.0/3.0*(cos(theta)*abc[0] + cos(theta - 2.0/3.0*M_PI)*abc[1]  + cos(theta + 2.0/3.0*M_PI)*abc[2] );
q = 2.0/3.0*(-sin(theta)*abc[0] - sin(theta - 2.0/3.0*M_PI)*abc[1]  - sin(theta + 2.0/3.0*M_PI)*abc[2] );

//error
e_q = q;

//omega
omega_pll = K_p_pll*e_q + y_q;
//theta
theta_pll = theta;
/*End code section*/"
                output_terminals = "real d;real q;real theta_pll;real omega_pll;real e_q;"
                output_terminals_dimensions = "1;1;1;1;1"
                output_terminals_feedthrough = "True;True;True;True;True"
                output_terminals_show_labels = "False;False;False;False;False"
                parameters = "real K_p_pll;real K_i_pll;real Ts_Control;"
                update_fnc = "/*Begin code section*/
// Integrator of the PLL
y_q= y_q + K_i_pll*Ts_Control*e_q;
// Integrator of theta
theta = theta + Ts_Control*omega_pll;
if (theta>=2*M_PI){
    theta = theta - 2*M_PI;
}
if (theta<0.0){
    theta = theta + abs(theta);
}
/*End code section*/"
            }
            [
                position = 6564, 7484
                size = 224, 304
            ]

            component "core/Bus Join" "Bus Join4" {
                execution_rate = "Ts_Control"
                inputs = "3"
            }
            [
                position = 6364, 7484
            ]

            component "core/Probe" theta {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 6956, 7512
            ]

            component "core/Probe" omega {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 6956, 7580
            ]

            component "core/Termination" Termination3 {
            }
            [
                position = 6764, 7612
            ]

            component "core/Bus Join" "Bus Join5" {
                execution_rate = "Ts_Control"
            }
            [
                position = 6744, 7812
            ]

            component "core/Probe" is_d {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 6848, 7740
            ]

            component "core/Probe" is_q {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 6848, 7896
            ]

            component "core/C function" "C function PI current controller" {
                arb_defs = "/*Begin code section*/

/*End code section*/"
                execution_rate = "Ts_Control"
                global_variables = "real y_d;real y_q;real e_d;real e_q;"
                init_fnc = "/*Begin code section*/
e_d = 0.0;
e_q = 0.0;
y_d = 0.0;
y_q = 0.0;
/*End code section*/"
                input_terminals = "real is_dq_ref;real is_dq;real vs_dq;real omega_pll;real v_dc;real time;"
                input_terminals_dimensions = "2;2;2;1;1;1"
                input_terminals_feedthrough = "True;True;True;True;True;True"
                input_terminals_show_labels = "False;False;False;False;False;False"
                output_fnc = "/*Begin code section*/
//modulating signal computation
eta_d = (2/v_dc) * (Kp_i*e_d + y_d -   L*omega_pll*is_dq[1] + vs_dq[0]);
eta_q = (2/v_dc )* (Kp_i*e_q + y_q +  L*omega_pll*is_dq[0] + vs_dq[1]);
/*End code section*/"
                output_terminals = "real eta_d;real eta_q;"
                output_terminals_dimensions = "1;1"
                output_terminals_feedthrough = "True;True"
                output_terminals_show_labels = "False;False"
                parameters = "real Kp_i;real Ki_i;real Ts_Control;real L;real T_on_contactor;"
                update_fnc = "/*Begin code section*/
//error
e_d = is_dq_ref[0] - is_dq[0];
e_q = is_dq_ref[1] - is_dq[1];
//integrator
y_d = y_d + Ki_i*Ts_Control*e_d;
y_q = y_q + Ki_i*Ts_Control*e_q;
if (time<T_on_contactor){
    y_d = 0;
    y_q = 0;
}
/*End code section*/"
            }
            [
                position = 9332, 7608
                size = 256, 320
            ]

            component "core/Bus Join" "Bus Join6" {
                execution_rate = "Ts_Control"
            }
            [
                position = 6796, 7392
            ]

            component "core/Probe" eta_d {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 9592, 7468
            ]

            component "core/Probe" eta_q {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 9592, 7712
            ]

            component "core/Bus Join" "Bus Join8" {
                execution_rate = "Ts_Control"
            }
            [
                position = 9560, 7588
            ]

            component "core/C function" "C function dq to abc" {
                arb_defs = "/*Begin code section*/

/*End code section*/"
                execution_rate = "Ts_Control"
                input_terminals = "real dq;real theta;"
                input_terminals_dimensions = "2;1"
                input_terminals_feedthrough = "True;True"
                input_terminals_show_labels = "False;False"
                output_fnc = "/*Begin code section*/
a= cos(theta)*dq[0] - sin(theta)*dq[1];
b= cos(theta -2.0/3.0*M_PI)*dq[0]  - sin(theta-2.0/3.0*M_PI)*dq[1];
c= cos(theta +2.0/3.0*M_PI)*dq[0] - sin(theta+2.0/3.0*M_PI)*dq[1];
/*End code section*/"
                output_terminals = "real a;real b;real c;"
                output_terminals_dimensions = "1;1;1"
                output_terminals_feedthrough = "True;True;True"
                output_terminals_show_labels = "False;False;False"
            }
            [
                position = 10060, 7584
                size = 176, 152
            ]

            component "core/Bus Join" "Bus Join9" {
                execution_rate = "Ts_Control"
                inputs = "3"
            }
            [
                position = 10252, 7584
            ]

            component "core/Probe" eta_a {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 10380, 7504
            ]

            component "core/Probe" eta_b {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 10404, 7628
            ]

            component "core/Probe" eta_c {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 10300, 7680
            ]

            component "core/Probe" is_d_ref {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 8716, 7248
            ]

            component "core/Probe" is_q_ref {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 8720, 7492
            ]

            component "core/Bus Join" "Bus Join11" {
                execution_rate = "Ts_Control"
            }
            [
                position = 8672, 7356
            ]

            component "core/C function" "C function current refer" {
                arb_defs = "/*Begin code section*/

/*End code section*/"
                execution_rate = "Ts_Control"
                input_terminals = "real pq_ref;real vs_dq;real time;"
                input_terminals_dimensions = "2;2;1"
                input_terminals_feedthrough = "True;True;True"
                input_terminals_show_labels = "False;False;False"
                output_fnc = "/*Begin code section*/
is_d_ref = 0;
is_d_ref = 0;

if (time>0.001){
    is_d_ref = 2.0/3.0*(pq_ref[0]*vs_dq[0] - pq_ref[1]*vs_dq[1])/(pow(vs_dq[0],2) + pow(vs_dq[1],2) );
    is_q_ref = 2.0/3.0*(pq_ref[0]*vs_dq[1] - pq_ref[1]*vs_dq[0])/(pow(vs_dq[0],2) + pow(vs_dq[1],2) );
}
/*End code section*/"
                output_terminals = "real is_d_ref;real is_q_ref;"
                output_terminals_dimensions = "1;1"
                output_terminals_feedthrough = "True;True"
                output_terminals_show_labels = "False;False"
            }
            [
                position = 8416, 7340
                size = 200, 152
            ]

            component "core/Bus Join" "Bus Join7" {
            }
            [
                position = 7376, 8176
            ]

            component "core/Probe" p_ref {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 7392, 8052
            ]

            component "core/Probe" q_ref {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 7704, 8300
            ]

            component "core/Clock" Clock1 {
                execution_rate = "Ts_Control"
            }
            [
                position = 7304, 7568
            ]

            component "core/C function" "C function PI voltage controller" {
                arb_defs = "/*Begin code section*/

/*End code section*/"
                execution_rate = "Ts_Control"
                global_variables = "real y_dc;real e_dc;"
                init_fnc = "/*Begin code section*/
y_dc = 0;
e_dc = 0;
/*End code section*/"
                input_terminals = "real v_dc_ref;real v_dc;real time;"
                input_terminals_dimensions = "1;1;1"
                input_terminals_feedthrough = "True;True;True"
                input_terminals_show_labels = "False;False;False"
                output_fnc = "/*Begin code section*/
p_ref =-( Kp_dc*e_dc + y_dc);
/*End code section*/"
                output_terminals = "real p_ref;"
                output_terminals_dimensions = "1"
                output_terminals_feedthrough = "True"
                output_terminals_show_labels = "False"
                parameters = "real Kp_dc;real Ki_dc;real Ts_Control;real T_on_contactor;"
                update_fnc = "/*Begin code section*/
e_dc = pow(v_dc_ref,2) - pow(v_dc,2);

y_dc = y_dc + Ki_dc*Ts_Control*e_dc;

if (time<T_on_contactor){
    y_dc = 0;
}
/*End code section*/"
            }
            [
                position = 7444, 7412
                size = 200, 224
            ]

            component "core/Probe" v_dc_ref {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 7536, 7252
            ]

            component "core/Probe" v_dc {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 7292, 7436
            ]

            component "core/Ramp" Ramp1 {
                execution_rate = "Ts_Control"
                initial_output = "600"
                slope = "1000/0.1"
                start_time = "0.3"
            }
            [
                position = 7356, 7212
            ]

            component "core/Limit" Limit1 {
                execution_rate = "Ts_Control"
                lower_limit = "[\'600\']"
                upper_limit = "[\'800\']"
            }
            [
                position = 7444, 7208
            ]

            component "core/Scope" "Voltage Reference Tracking" {
                selected_signals = "[\"Controller.v_dc_ref\", \"Controller.v_dc\"]"
                signals_data = "{\"signals\": {\"Controller.v_dc_ref\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#FF0000\"}, \"display\": {\"1\": \"solid\"}}, \"Controller.v_dc\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#00CC00\"}, \"display\": {\"1\": \"solid\"}}}, \"viewports\": {\"1\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"2\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"3\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"4\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}}, \"plot_settings\": {\"layout\": \"Vertical\", \"background_color\": \"white\", \"legend_visible\": true}}"
            }
            [
                position = 7720, 7316
            ]

            component "core/C function" "C function1" {
                arb_defs = "/*Begin code section*/

/*End code section*/"
                execution_rate = "Ts_Control"
                global_variables = "real y_qref;real e_qref;"
                init_fnc = "/*Begin code section*/
y_qref = 0;
e_qref = 0;
/*End code section*/"
                input_terminals = "inherit q_ref_gen;real q_gen;inherit time;"
                input_terminals_dimensions = "inherit;inherit;inherit"
                input_terminals_feedthrough = "True;True;True"
                input_terminals_show_labels = "True;True;True"
                output_fnc = "/*Begin code section*/
q_ref = -( Kp_qref*e_qref + y_qref);
/*End code section*/"
                output_terminals = "real q_ref;"
                output_terminals_dimensions = "inherit"
                output_terminals_feedthrough = "True"
                output_terminals_show_labels = "True"
                parameters = "real Kp_qref;real Ki_qref;real T_on_react_com;real Ts_Control;"
                update_fnc = "/*Begin code section*/
e_qref = q_ref_gen - q_gen;

y_qref = y_qref + Ki_qref*Ts_Control*e_qref;

if (time<T_on_react_com){
    y_qref = 0;
}
/*End code section*/"
            }
            [
                position = 7840, 7800
                size = 248, 232
            ]

            component "core/C function" "C function powers" {
                arb_defs = "/*Begin code section*/

/*End code section*/"
                execution_rate = "Ts_Control"
                global_variables = "real p_fil;real q_fil;"
                init_fnc = "/*Begin code section*/
p_fil = 0;
q_fil = 0;
/*End code section*/"
                input_terminals = "real v_a;real v_b;real v_c;real i_a;real i_b;real i_c;"
                input_terminals_dimensions = "inherit;inherit;inherit;inherit;inherit;inherit"
                input_terminals_feedthrough = "True;True;True;True;True;True"
                input_terminals_show_labels = "True;True;True;True;True;True"
                output_fnc = "/*Begin code section*/
p = v_a*i_a + v_b*i_b + v_c*i_c;
q = 1/sqrt(3)*(i_c*(v_a - v_b) + i_a*(v_b - v_c) + i_b*(v_c - v_a));
p_f = p_fil;
q_f = q_fil;
/*End code section*/"
                output_terminals = "real p;real q;real p_f;real q_f;"
                output_terminals_dimensions = "inherit;inherit;inherit;inherit"
                output_terminals_feedthrough = "True;True;True;True"
                output_terminals_show_labels = "True;True;True;True"
                parameters = "real Ts_Control;real fc;"
                update_fnc = "/*Begin code section*/
p_fil = p_fil + Ts_Control*2*M_PI*fc*(p - p_fil);
q_fil = q_fil + Ts_Control*2*M_PI*fc*(q - q_fil);
/*End code section*/"
            }
            [
                position = 7376, 7816
                size = 184, 312
            ]

            component "core/Constant" q_ref_gen {
                execution_rate = "Ts_Control"
                value = "0"
            }
            [
                position = 7636, 7704
            ]

            component "core/Scope" "Reference Tracking1" {
                selected_signals = "[\"Controller.q_ref\", \"q\", \"q_fil\", \"Controller.q_gen_fil\"]"
                signals_data = "{\"signals\": {\"Controller.q_ref\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#FF0000\"}, \"display\": {\"1\": \"solid\"}}, \"q\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#00CC00\"}, \"display\": {\"1\": \"solid\"}}, \"q_fil\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#0099FF\"}, \"display\": {\"1\": \"solid\"}}, \"Controller.q_gen_fil\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#FFCC00\"}, \"display\": {\"1\": \"solid\"}}}, \"viewports\": {\"1\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"2\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"3\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"4\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}}, \"plot_settings\": {\"layout\": \"Vertical\", \"background_color\": \"white\", \"legend_visible\": true}}"
            }
            [
                position = 7652, 8100
            ]

            component "core/Probe" q_gen_fil {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 7576, 7996
            ]

            component "core/C function" "C function abc to dq1" {
                arb_defs = "/*Begin code section*/

/*End code section*/"
                execution_rate = "Ts_Control"
                input_terminals = "real abc;real theta;"
                input_terminals_dimensions = "3;1"
                input_terminals_feedthrough = "True;True"
                input_terminals_show_labels = "True;True"
                output_fnc = "/*Begin code section*/
d= 2.0/3.0*(cos(theta)*abc[0] + cos(theta - 2.0/3.0*M_PI)*abc[1]  + cos(theta + 2.0/3.0*M_PI)*abc[2] );
q = 2.0/3.0*(-sin(theta)*abc[0] - sin(theta - 2.0/3.0*M_PI)*abc[1]  - sin(theta + 2.0/3.0*M_PI)*abc[2] );
/*End code section*/"
                output_terminals = "real d;real q;"
                output_terminals_dimensions = "1;1"
                output_terminals_feedthrough = "True;True"
                output_terminals_show_labels = "True;True"
            }
            [
                position = 8580, 7916
                size = 176, 152
            ]

            component "core/Bus Join" "Bus Join12" {
                execution_rate = "Ts_Control"
                inputs = "3"
            }
            [
                position = 8348, 7856
            ]

            component "core/Integrator" Integrator1 {
                execution_rate = "Ts_Control"
                reset_type = "synchronous"
            }
            [
                position = 10444, 8756
            ]

            component "core/Sum" Sum1 {
                signs = "+-"
            }
            [
                position = 10296, 8756
            ]

            component "core/Product" Product1 {
                signs = "3"
            }
            [
                position = 10364, 8948
                rotation = down
            ]

            component "core/Gain" Gain1 {
                gain = "6"
            }
            [
                position = 10480, 8952
                rotation = down
            ]

            component "core/Integrator" Integrator2 {
                execution_rate = "Ts_Control"
                reset_type = "synchronous"
            }
            [
                position = 10244, 8948
                rotation = down
            ]

            component "core/Gain" Gain2 {
                gain = "Ki_i*2"
            }
            [
                position = 9008, 8028
            ]

            component "core/Sum" Sum2 {
                signs = "-+"
            }
            [
                position = 8884, 8024
            ]

            component "core/Gain" Gain3 {
                gain = "2"
            }
            [
                position = 9540, 8036
            ]

            component "core/Product" Product2 {
                signs = "*/"
            }
            [
                position = 9656, 8048
            ]

            component "core/C function" "C function dq to abc1" {
                arb_defs = "/*Begin code section*/

/*End code section*/"
                execution_rate = "Ts_Control"
                input_terminals = "real dq;real theta;"
                input_terminals_dimensions = "2;1"
                input_terminals_feedthrough = "True;True"
                input_terminals_show_labels = "True;True"
                output_fnc = "/*Begin code section*/
a= cos(theta)*dq[0] - sin(theta)*dq[1];
b= cos(theta -2.0/3.0*M_PI)*dq[0]  - sin(theta-2.0/3.0*M_PI)*dq[1];
c= cos(theta +2.0/3.0*M_PI)*dq[0] - sin(theta+2.0/3.0*M_PI)*dq[1];
/*End code section*/"
                output_terminals = "real a;real b;real c;"
                output_terminals_dimensions = "1;1;1"
                output_terminals_feedthrough = "True;True;True"
                output_terminals_show_labels = "True;True;True"
            }
            [
                position = 10012, 8108
                size = 176, 152
            ]

            component "core/Bus Join" "Bus Join14" {
                execution_rate = "Ts_Control"
                inputs = "3"
            }
            [
                position = 10220, 8104
            ]

            component "core/Sum" Sum3 {
                signs = "++"
            }
            [
                position = 10616, 7596
            ]

            component "core/Probe" eta_a_5 {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 10284, 7960
            ]

            component "core/Scope" "Reference Tracking2" {
                selected_signals = "[\"Controller.eta_a_5\"]"
                signals_data = "{\"signals\": {\"Controller.eta_a_5\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#FF0000\"}, \"display\": {\"1\": \"solid\"}}}, \"viewports\": {\"1\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"2\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"3\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"4\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}}, \"plot_settings\": {\"layout\": \"Vertical\", \"background_color\": \"white\", \"legend_visible\": true}}"
            }
            [
                position = 10420, 7932
            ]

            component "core/Gain" Gain5 {
                gain = "Ki_i*2"
            }
            [
                position = 8992, 8352
            ]

            component "core/Sum" Sum5 {
                signs = "-+"
            }
            [
                position = 8868, 8348
            ]

            component "core/Gain" Gain6 {
                gain = "2"
            }
            [
                position = 9524, 8348
            ]

            component "core/Product" Product4 {
                signs = "*/"
            }
            [
                position = 9640, 8372
            ]

            component "core/Bus Join" "Bus Join15" {
                execution_rate = "Ts_Control"
            }
            [
                position = 9816, 8044
            ]

            component "core/Product" Product5 {
                signs = "**"
            }
            [
                position = 10368, 8108
            ]

            component "core/Step" Step3 {
                execution_rate = "Ts_Control"
                step_time = "T_on_harmonic"
            }
            [
                position = 10200, 8256
            ]

            component "core/Scope" "Reference Tracking3" {
                selected_signals = "[\"Controller.ig_d\", \"Controller.ig_q\", \"Controller.omega\"]"
                signals_data = "{\"signals\": {\"Controller.ig_d\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#FF0000\"}, \"display\": {\"1\": \"solid\"}}, \"Controller.ig_q\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#00CC00\"}, \"display\": {\"1\": \"solid\"}}, \"Controller.omega\": {\"viewports\": [2], \"type\": \"analog\", \"color\": {\"2\": \"#FF0000\"}, \"display\": {\"2\": \"solid\"}}}, \"viewports\": {\"1\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"2\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"3\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"4\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}}, \"plot_settings\": {\"layout\": \"Vertical\", \"background_color\": \"white\", \"legend_visible\": true}}"
            }
            [
                position = 9096, 7864
            ]

            component "core/Probe" ig_d {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 8836, 7744
            ]

            component "core/Probe" ig_q {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 8832, 7920
            ]

            component "core/Discrete Transfer Function" "Discrete Transfer Function1" {
                a_coeff = "[1,2*delta,omega_2]"
                b_coeff = "[1,0]"
                domain = "S-domain"
                execution_rate = "Ts_Control"
            }
            [
                position = 9184, 8028
            ]

            component "core/Discrete Transfer Function" "Discrete Transfer Function2" {
                a_coeff = "[1,2*delta,omega_2]"
                b_coeff = "[1,0]"
                domain = "S-domain"
                execution_rate = "Ts_Control"
            }
            [
                position = 9204, 8352
            ]

            tag Goto2 {
                value = "modulator"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 10740, 7596
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 84, 20
            ]

            tag From57 {
                value = "is_a"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 6248, 7732
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From58 {
                value = "is_b"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 6244, 7764
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From59 {
                value = "is_c"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 6248, 7808
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From61 {
                value = "vs_a"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 6196, 7464
                hide_name = True
                size = 60, 20
            ]

            tag From62 {
                value = "vs_b"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 6196, 7488
                hide_name = True
                size = 60, 20
            ]

            tag From63 {
                value = "vs_c"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 6196, 7512
                hide_name = True
                size = 60, 20
            ]

            tag Goto35 {
                value = "theta"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 6764, 7484
                hide_name = True
                size = 60, 20
            ]

            tag From64 {
                value = "theta"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 6860, 7512
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto36 {
                value = "omega"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 6756, 7548
                hide_name = True
                size = 60, 20
            ]

            tag From65 {
                value = "omega"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 6860, 7580
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From66 {
                value = "theta"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 6384, 7872
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto37 {
                value = "is_dq"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 6840, 7812
                hide_name = True
                size = 60, 20
            ]

            tag From67 {
                value = "is_dq"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 9100, 7524
                hide_name = True
                size = 60, 20
            ]

            tag Goto38 {
                value = "vs_dq"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 6884, 7392
                hide_name = True
                size = 60, 20
            ]

            tag From68 {
                value = "vs_dq"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 9096, 7580
                hide_name = True
                size = 60, 20
            ]

            tag From69 {
                value = "omega"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 9104, 7636
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From70 {
                value = "v_dc"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 9104, 7692
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From71 {
                value = "is_dq_ref"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 9104, 7468
                hide_name = True
                size = 60, 20
            ]

            tag Goto40 {
                value = "eta_dq"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 9664, 7588
                hide_name = True
                size = 60, 20
            ]

            tag From72 {
                value = "eta_dq"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 9844, 7528
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From73 {
                value = "theta"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 9844, 7644
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto41 {
                value = "eta_abc"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 10348, 7584
                hide_name = True
                size = 60, 20
            ]

            tag From74 {
                value = "eta_abc"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 10504, 7588
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto43 {
                value = "is_dq_ref"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8764, 7356
                hide_name = True
                size = 60, 20
            ]

            tag From75 {
                value = "pq_ref"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 8244, 7284
                hide_name = True
                size = 60, 20
            ]

            tag From76 {
                value = "vs_dq"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 8244, 7340
                hide_name = True
                size = 60, 20
            ]

            tag From81 {
                value = "time"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 8240, 7396
                hide_name = True
                size = 60, 20
            ]

            tag From82 {
                value = "time"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 9112, 7748
                hide_name = True
                size = 60, 20
            ]

            tag Goto39 {
                value = "pq_ref"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7464, 8176
                hide_name = True
                size = 60, 20
            ]

            tag Goto45 {
                value = "time"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7396, 7568
                hide_name = True
                size = 60, 20
            ]

            tag From80 {
                value = "v_dc"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 7176, 7412
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From83 {
                value = "time"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 7272, 7508
                hide_name = True
                size = 60, 20
            ]

            tag Goto46 {
                value = "q_ref"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8044, 7800
                hide_name = True
                size = 60, 20
            ]

            tag From84 {
                value = "q_ref"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 7240, 8188
                hide_name = True
                size = 60, 20
            ]

            tag Goto47 {
                value = "p_ref"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7604, 7412
                hide_name = True
                size = 60, 20
            ]

            tag From85 {
                value = "p_ref"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 7240, 8144
                hide_name = True
                size = 60, 20
            ]

            tag Goto48 {
                value = "v_dc_ref"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7536, 7208
                hide_name = True
                size = 60, 20
            ]

            tag From86 {
                value = "v_dc_ref"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 7276, 7316
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From87 {
                value = "vs_a"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 7164, 7676
                hide_name = True
                size = 60, 20
            ]

            tag From88 {
                value = "vs_b"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 7164, 7728
                hide_name = True
                size = 60, 20
            ]

            tag From89 {
                value = "vs_c"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 7168, 7788
                hide_name = True
                size = 60, 20
            ]

            tag From90 {
                value = "ig_a"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 7172, 7840
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From91 {
                value = "ig_b"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 7172, 7900
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From92 {
                value = "ig_c"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 7172, 7956
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto49 {
                value = "q_gen_fil"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7540, 7948
                hide_name = True
                size = 60, 20
            ]

            tag From93 {
                value = "q_gen_fil"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 7636, 7800
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From94 {
                value = "time"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 7636, 7896
                hide_name = True
                size = 60, 20
            ]

            tag From95 {
                value = "ih_a"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 8208, 7824
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From96 {
                value = "ih_b"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 8208, 7856
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From97 {
                value = "ih_c"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 8204, 7904
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From98 {
                value = "theta"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 8328, 7976
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto50 {
                value = "ih_q"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8824, 7976
                hide_name = True
                size = 60, 20
            ]

            tag From99 {
                value = "omega"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 10616, 8956
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From100 {
                value = "ih_d"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 8720, 8080
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From101 {
                value = "v_dc"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 9540, 8140
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From102 {
                value = "theta"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 9828, 8172
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto51 {
                value = "eta_abc_5"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 10516, 8112
                hide_name = True
                size = 60, 20
            ]

            tag From103 {
                value = "eta_abc_5"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 10476, 7712
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto52 {
                value = "ih_d"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8812, 7852
                hide_name = True
                size = 60, 20
            ]

            tag From105 {
                value = "ih_q"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 8720, 8384
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From106 {
                value = "v_dc"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 9524, 8464
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto53 {
                value = "is_d"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 6968, 7652
                hide_name = True
                size = 60, 20
            ]

            tag Goto54 {
                value = "is_q"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 6924, 8044
                hide_name = True
                size = 60, 20
            ]

            tag From107 {
                value = "is_d"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 8716, 8008
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From108 {
                value = "is_q"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 8716, 8316
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            junction Junction184 sp
            [
                position = 6672, 7760
            ]

            junction Junction185 sp
            [
                position = 6672, 7872
            ]

            junction Junction186 sp
            [
                position = 6748, 7420
            ]

            junction Junction187 sp
            [
                position = 6740, 7356
            ]

            junction Junction196 sp
            [
                position = 10164, 7528
            ]

            junction Junction197 sp
            [
                position = 10188, 7584
            ]

            junction Junction198 sp
            [
                position = 10204, 7640
            ]

            junction Junction207 sp
            [
                position = 9488, 7468
            ]

            junction Junction208 sp
            [
                position = 9488, 7708
            ]

            junction Junction213 sp
            [
                position = 8616, 7280
            ]

            junction Junction214 sp
            [
                position = 8632, 7364
            ]

            junction Junction215 sp
            [
                position = 7336, 8184
            ]

            junction Junction216 sp
            [
                position = 7336, 8144
            ]

            junction Junction218 sp
            [
                position = 7260, 7412
            ]

            junction Junction219 sp
            [
                position = 7476, 7208
            ]

            junction Junction220 sp
            [
                position = 7484, 7948
            ]

            junction Junction221 sp
            [
                position = 10432, 8952
            ]

            junction Junction224 sp
            [
                position = 10180, 8052
            ]

            junction Junction228 sp
            [
                position = 8736, 7856
            ]

            junction Junction229 sp
            [
                position = 8736, 7976
            ]

            junction Junction230 sp
            [
                position = 6812, 7740
            ]

            junction Junction231 sp
            [
                position = 6768, 7896
            ]

            comment Comment4 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">PLL and abc to dq transformation</p></body></html> ENDCOMMENT 
            [
                position = 6412, 7152
            ]

            comment Comment6 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">dq PI controller with feedforward voltages and cross-coupling terms cancellation</p></body></html> ENDCOMMENT 
            [
                position = 8984, 7144
            ]

            comment Comment7 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">dq to abc transformation</p></body></html> ENDCOMMENT 
            [
                position = 9948, 7148
            ]

            comment Comment8 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">PQ references and current references computation</p></body></html> ENDCOMMENT 
            [
                position = 8224, 7136
            ]

            comment Comment9 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">DC bus voltage PI controller and Q reference</p></body></html> ENDCOMMENT 
            [
                position = 7292, 7128
            ]

            connect From58 "Bus Join3.in1" as Connection479
            connect From57 "Bus Join3.in" as Connection480
            connect From59 "Bus Join3.in2" as Connection481
            connect From63 "Bus Join4.in2" as Connection489
            connect "Bus Join4.in1" From62 as Connection490
            connect From61 "Bus Join4.in" as Connection491
            connect "C function PLL.e_q" Termination3.in as Connection497
            connect Goto35 "C function PLL.theta_pll" as Connection500
            connect From64 theta.in as Connection501
            connect Goto36 "C function PLL.omega_pll" as Connection502
            connect From65 omega.in as Connection503
            connect From66 "C function abc to dq.theta" as Connection504
            connect Goto37 "Bus Join5.out" as Connection507
            connect "Bus Join5.in" Junction184 as Connection508
            connect Junction184 "C function abc to dq.d" as Connection509
            connect "C function abc to dq.q" Junction185 as Connection511
            connect Junction185 "Bus Join5.in1" as Connection512
            [
                breakpoints = 6672, 7872; 6672, 7824
            ]
            connect From67 "C function PI current controller.is_dq" as Connection514
            connect "Bus Join6.out" Goto38 as Connection517
            connect "Bus Join6.in1" Junction186 as Connection518
            [
                breakpoints = 6756, 7404; 6756, 7404; 6756, 7420
            ]
            connect Junction186 "C function PLL.q" as Connection519
            connect v_q.in Junction186 as Connection520
            connect "C function PLL.d" Junction187 as Connection521
            connect Junction187 "Bus Join6.in" as Connection522
            connect v_d.in Junction187 as Connection523
            connect From68 "C function PI current controller.vs_dq" as Connection524
            connect From69 "C function PI current controller.omega_pll" as Connection525
            connect Goto40 "Bus Join8.out" as Connection553
            connect From72 "C function dq to abc.dq" as Connection554
            connect From73 "C function dq to abc.theta" as Connection555
            connect Goto41 "Bus Join9.out" as Connection559
            connect "Bus Join9.in" Junction196 as Connection574
            connect Junction196 "C function dq to abc.a" as Connection575
            connect eta_a.in Junction196 as Connection576
            connect "Bus Join9.in1" Junction197 as Connection577
            connect Junction197 "C function dq to abc.b" as Connection578
            connect eta_b.in Junction197 as Connection579
            connect "C function dq to abc.c" Junction198 as Connection580
            connect Junction198 "Bus Join9.in2" as Connection581
            connect eta_c.in Junction198 as Connection582
            connect From71 "C function PI current controller.is_dq_ref" as Connection605
            connect From70 "C function PI current controller.v_dc" as Connection653
            connect "Bus Join3.out" "C function abc to dq.abc" as Connection660
            connect "Bus Join4.out" "C function PLL.abc" as Connection661
            connect "C function PI current controller.eta_d" Junction207 as Connection663
            connect Junction207 eta_d.in as Connection664
            connect "Bus Join8.in" Junction207 as Connection665
            connect "Bus Join8.in1" Junction208 as Connection667
            connect Junction208 "C function PI current controller.eta_q" as Connection668
            connect eta_q.in Junction208 as Connection669
            connect Goto43 "Bus Join11.out" as Connection762
            connect From75 "C function current refer.pq_ref" as Connection740
            connect From76 "C function current refer.vs_dq" as Connection741
            connect "Bus Join11.in" Junction213 as Connection742
            [
                breakpoints = 8616, 7348
            ]
            connect Junction213 is_d_ref.in as Connection743
            connect "C function current refer.is_d_ref" Junction213 as Connection744
            connect is_q_ref.in Junction214 as Connection763
            connect Junction214 "Bus Join11.in1" as Connection764
            connect "C function current refer.is_q_ref" Junction214 as Connection765
            [
                breakpoints = 8532, 7364; 8632, 7364
            ]
            connect From81 "C function current refer.time" as Connection766
            connect From82 "C function PI current controller.time" as Connection767
            connect "Bus Join7.out" Goto39 as Connection602
            connect Clock1.out Goto45 as Connection768
            connect From83 "C function PI voltage controller.time" as Connection769
            connect q_ref.in Junction215 as Connection771
            connect Junction215 "Bus Join7.in1" as Connection772
            connect From84 Junction215 as Connection773
            [
                breakpoints = 7292, 8184; 7336, 8184
            ]
            connect "C function PI voltage controller.p_ref" Goto47 as Connection774
            connect "Bus Join7.in" Junction216 as Connection775
            connect Junction216 p_ref.in as Connection776
            connect From85 Junction216 as Connection777
            connect From86 "C function PI voltage controller.v_dc_ref" as Connection778
            connect From80 Junction218 as Connection784
            connect Junction218 v_dc.in as Connection785
            connect "C function PI voltage controller.v_dc" Junction218 as Connection786
            connect Ramp1.out Limit1.in as Connection788
            connect Goto48 Junction219 as Connection789
            connect Junction219 Limit1.out as Connection790
            connect v_dc_ref.in Junction219 as Connection791
            connect From89 "C function powers.v_c" as Connection792
            connect From88 "C function powers.v_b" as Connection793
            connect From87 "C function powers.v_a" as Connection794
            connect From91 "C function powers.i_b" as Connection795
            connect From92 "C function powers.i_c" as Connection796
            connect From90 "C function powers.i_a" as Connection797
            connect From93 "C function1.q_gen" as Connection799
            connect q_ref_gen.out "C function1.q_ref_gen" as Connection800
            connect Goto46 "C function1.q_ref" as Connection801
            connect From94 "C function1.time" as Connection803
            connect "C function powers.q_f" Junction220 as Connection804
            connect Junction220 Goto49 as Connection805
            connect q_gen_fil.in Junction220 as Connection806
            connect From96 "Bus Join12.in1" as Connection807
            connect From95 "Bus Join12.in" as Connection808
            connect From97 "Bus Join12.in2" as Connection809
            connect "Bus Join12.out" "C function abc to dq1.abc" as Connection810
            connect From98 "C function abc to dq1.theta" as Connection811
            connect Sum1.out Integrator1.in as Connection815
            connect From99 Gain1.in as Connection817
            connect Gain1.out Junction221 as Connection819
            connect Junction221 Product1.in1 as Connection820
            connect Product1.in Junction221 as Connection821
            connect Product1.out Integrator2.in as Connection822
            connect Integrator2.out Sum1.in1 as Connection823
            connect Sum2.out Gain2.in as Connection825
            connect Product2.in Gain3.out as Connection831
            connect From101 Product2.in1 as Connection832
            connect From102 "C function dq to abc1.theta" as Connection834
            connect "Bus Join14.in1" "C function dq to abc1.b" as Connection835
            connect "Bus Join14.in2" "C function dq to abc1.c" as Connection837
            connect "C function dq to abc1.a" Junction224 as Connection848
            connect Junction224 "Bus Join14.in" as Connection849
            connect eta_a_5.in Junction224 as Connection850
            connect Sum5.out Gain5.in as Connection861
            connect Product4.in Gain6.out as Connection865
            connect From106 Product4.in1 as Connection866
            connect "Bus Join15.out" "C function dq to abc1.dq" as Connection872
            connect "Bus Join15.in" Product2.out as Connection873
            connect Product4.out "Bus Join15.in1" as Connection874
            connect Product5.in "Bus Join14.out" as Connection875
            connect Product5.out Goto51 as Connection876
            connect Step3.out Product5.in1 as Connection877
            connect "C function abc to dq1.d" Junction228 as Connection878
            connect Junction228 Goto52 as Connection879
            connect ig_d.in Junction228 as Connection880
            connect Goto50 Junction229 as Connection881
            connect Junction229 "C function abc to dq1.q" as Connection882
            connect ig_q.in Junction229 as Connection883
            connect From100 Sum2.in1 as Connection884
            connect is_d.in Junction230 as Connection885
            connect Junction230 Junction184 as Connection886
            connect Goto53 Junction230 as Connection887
            connect is_q.in Junction231 as Connection888
            connect Junction231 Junction185 as Connection889
            connect Goto54 Junction231 as Connection890
            connect From107 Sum2.in as Connection891
            connect From105 Sum5.in1 as Connection892
            connect From108 Sum5.in as Connection893
            connect Product1.in2 Integrator1.out as Connection894
            [
                breakpoints = 10516, 8932; 10516, 8788; 10516, 8748
            ]
            connect Gain2.out "Discrete Transfer Function1.in" as Connection895
            connect "Discrete Transfer Function1.out" Gain3.in as Connection896
            connect "Discrete Transfer Function2.in" Gain5.out as Connection897
            connect "Discrete Transfer Function2.out" Gain6.in as Connection898
            connect Sum3.in From74 as Connection899
            connect From103 Sum3.in1 as Connection900
            [
                breakpoints = 10552, 7712; 10552, 7604
            ]
            connect Sum3.out Goto2 as Connection901
        }
        [
            position = 8728, 8304
            size = 256, 232
        ]

        component "core/C function" "C function powers" {
            arb_defs = "/*Begin code section*/

/*End code section*/"
            execution_rate = "Ts_Control"
            global_variables = "real p_fil;real q_fil;"
            init_fnc = "/*Begin code section*/
p_fil = 0;
q_fil = 0;
/*End code section*/"
            input_terminals = "real v_a;real v_b;real v_c;real i_a;real i_b;real i_c;"
            input_terminals_dimensions = "inherit;inherit;inherit;inherit;inherit;inherit"
            input_terminals_feedthrough = "True;True;True;True;True;True"
            input_terminals_show_labels = "False;False;False;False;False;False"
            output_fnc = "/*Begin code section*/
p = v_a*i_a + v_b*i_b + v_c*i_c;
q = 1/sqrt(3)*(i_c*(v_a - v_b) + i_a*(v_b - v_c) + i_b*(v_c - v_a));
p_f = p_fil;
q_f = q_fil;
/*End code section*/"
            output_terminals = "real p;real q;real p_f;real q_f;"
            output_terminals_dimensions = "inherit;inherit;inherit;inherit"
            output_terminals_feedthrough = "True;True;True;True"
            output_terminals_show_labels = "False;False;False;False"
            parameters = "real Ts_Control;real fc;"
            update_fnc = "/*Begin code section*/
p_fil = p_fil + Ts_Control*2*M_PI*fc*(p - p_fil);
q_fil = q_fil + Ts_Control*2*M_PI*fc*(q - q_fil);
/*End code section*/"
        }
        [
            position = 8104, 8684
            size = 184, 312
        ]

        component "core/Probe" q_fil {
            execution_rate = "Ts_Control"
            signal_access = "Inherit"
        }
        [
            position = 8588, 8756
        ]

        component Subsystem Plant {
            layout = dynamic
            component "core/Constant" C {
                execution_rate = "Tfast"
            }
            [
                position = 7640, 7992
            ]

            component "core/Ground" gnd3 {
            }
            [
                position = 10252, 8560
                hide_name = True
            ]

            component "core/Ground" gnd4 {
            }
            [
                position = 10540, 8220
                hide_name = True
            ]

            component "core/Bus Split" "Bus Split1" {
                execution_rate = "Ts_Control"
                outputs = "3"
            }
            [
                position = 7632, 7920
            ]

            component "core/Resistor" Rdc {
                resistance = "50e-3"
            }
            [
                position = 7156, 8056
            ]

            component "core/Voltage Measurement" vs_a {
                addr = "7"
                execution_rate = "Tfast"
                sig_output = "True"
            }
            [
                position = 10180, 8368
                rotation = right
                scale = -1, 1
                size = 64, 32
            ]

            component "core/Voltage Measurement" v_sb {
                addr = "9"
                execution_rate = "Tfast"
                sig_output = "True"
            }
            [
                position = 10252, 8416
                rotation = right
                scale = -1, 1
                size = 64, 32
            ]

            component "core/Voltage Measurement" vs_c {
                addr = "11"
                execution_rate = "Tfast"
                sig_output = "True"
            }
            [
                position = 10332, 8464
                rotation = right
                scale = -1, 1
                size = 64, 32
            ]

            component "core/Current Measurement" is_a {
                addr = "14"
                execution_rate = "Tfast"
                sig_output = "True"
            }
            [
                position = 8588, 8060
                scale = 1, -1
                size = 64, 32
            ]

            component "core/Current Measurement" is_b {
                addr = "15"
                execution_rate = "Tfast"
                sig_output = "True"
            }
            [
                position = 8592, 8156
                scale = 1, -1
                size = 64, 32
            ]

            component "core/Current Measurement" is_c {
                addr = "16"
                execution_rate = "Tfast"
                sig_output = "True"
            }
            [
                position = 8584, 8252
                scale = 1, -1
                size = 64, 32
            ]

            component "core/Three Phase Voltage Source" Vgrid {
                init_frequency = "50"
                init_rms_value = "230"
            }
            [
                position = 10444, 8164
                scale = -1, 1
                size = 62, 256
            ]

            component "core/Current Measurement" Idc_link {
                addr = "7"
                execution_rate = "Tfast"
            }
            [
                position = 7436, 8056
                scale = 1, -1
                size = 64, 32
            ]

            component "core/Voltage Measurement" VDC {
                execution_rate = "Tfast"
                sig_output = "True"
            }
            [
                position = 7340, 8152
                rotation = right
                size = 64, 32
            ]

            component "core/Three Phase Inverter" "Three Phase Inverter" {
                carrier_freq = "fs"
                ctrl_src = "Internal modulator"
                d_time = "dt"
                execution_rate = "0.1e-6"
                fvd_def_method = "LUT"
            }
            [
                position = 7724, 8156
                size = 127, 256
            ]

            component "core/Triple Pole Single Throw Contactor" S1 {
                ctrl_src = "Model"
            }
            [
                position = 8996, 8156
                size = 64, 256
            ]

            component "core/Step" contactor {
                execution_rate = "Ts_Control"
                step_time = "T_on_contactor"
            }
            [
                position = 8880, 7948
            ]

            component "core/Series RLC Branch" "VSC side inductor_Rt_Lt" {
                branch_type = "RL"
                inductance = "Lt"
                num_phases = "Three-Phase"
                resistance = "Rt"
            }
            [
                position = 8004, 8156
                size = 128, 256
            ]

            component "core/Series RLC Branch" "Capacitor and dampin resistor" {
                branch_type = "RC"
                capacitance = "C"
                inductance = "Lt"
                num_phases = "Three-Phase"
                resistance = "Rd"
            }
            [
                position = 8288, 8448
                rotation = right
                size = 128, 256
            ]

            component "core/Series RLC Branch" "Grid side inductor_Rs_Ls" {
                branch_type = "RL"
                inductance = "Ls"
                num_phases = "Three-Phase"
                resistance = "Rs"
            }
            [
                position = 8800, 8156
                size = 128, 256
            ]

            component "core/Capacitor" Cdc1 {
                capacitance = "C_dc"
                initial_voltage = "vdc_ini"
                signal_access = "Inherit"
            }
            [
                position = 7004, 8160
                rotation = right
            ]

            component "core/Scope" pq_load {
                selected_signals = "[\"Plant.p_load\", \"Plant.q_load\"]"
                signals_data = "{\"signals\": {\"Plant.p_load\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#FF0000\"}, \"display\": {\"1\": \"solid\"}}, \"Plant.q_load\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#00CC00\"}, \"display\": {\"1\": \"solid\"}}}, \"viewports\": {\"1\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"2\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"3\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"4\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}}, \"plot_settings\": {\"layout\": \"Vertical\", \"background_color\": \"white\", \"legend_visible\": true}}"
            }
            [
                position = 10100, 7936
            ]

            component "core/VBR Variable Load" "VBR Variable Load1" {
                Sn = "20e3"
                Vn = "400"
                fn = "50"
                powerRate = "50"
            }
            [
                position = 9680, 7804
                rotation = left
                size = 184, 160
            ]

            component "core/Constant" enable_load {
                execution_rate = "Tfast"
            }
            [
                position = 9392, 7900
            ]

            component "core/Bus Join" "Bus Join1" {
                inputs = "3"
            }
            [
                position = 9520, 7956
                hide_name = True
            ]

            component "core/Step" P_ref_load {
                execution_rate = "Ts_Control"
                final_value = "10e3"
                step_time = "0.7"
            }
            [
                position = 9392, 7956
            ]

            component "core/Step" Q_ref_load {
                execution_rate = "Ts_Control"
                final_value = "5e3"
                step_time = "0.8"
            }
            [
                position = 9392, 8012
            ]

            component "core/Bus Split" "Bus Split2" {
                outputs = "4"
            }
            [
                position = 9856, 7940
                rotation = down
                hide_name = True
                scale = -1, -1
            ]

            component "core/Probe" p_load {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
            }
            [
                position = 9976, 7896
            ]

            component "core/Probe" q_load {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
            }
            [
                position = 9976, 7956
            ]

            component "core/Current Measurement" ig_a {
                addr = "14"
                execution_rate = "Tfast"
                sig_output = "True"
            }
            [
                position = 9924, 8068
                rotation = down
                scale = 1, -1
                size = 64, 32
            ]

            component "core/Current Measurement" ig_b {
                addr = "14"
                execution_rate = "Tfast"
                sig_output = "True"
            }
            [
                position = 9932, 8164
                rotation = down
                scale = 1, -1
                size = 64, 32
            ]

            component "core/Current Measurement" ig_c {
                addr = "14"
                execution_rate = "Tfast"
                sig_output = "True"
            }
            [
                position = 9940, 8256
                rotation = down
                scale = 1, -1
                size = 64, 32
            ]

            component Subsystem non_linear_load {
                layout = dynamic
                component "core/Sinusoidal Source" "Sinusoidal Source1" {
                    execution_rate = "Ts_Control"
                    frequency = "50*5"
                }
                [
                    position = 7532, 7864
                ]

                component "core/Sinusoidal Source" "Sinusoidal Source2" {
                    execution_rate = "Ts_Control"
                    frequency = "50*5"
                    phase = "120"
                }
                [
                    position = 7536, 7952
                ]

                component "core/Sinusoidal Source" "Sinusoidal Source3" {
                    execution_rate = "Ts_Control"
                    frequency = "50*5"
                    phase = "-120"
                }
                [
                    position = 7532, 8032
                ]

                component "core/Series RLC Branch" "Capacitor and dampin resistor" {
                    branch_type = "R"
                    capacitance = "C"
                    inductance = "Lt"
                    num_phases = "Three-Phase"
                    resistance = "1e4"
                }
                [
                    position = 8236, 8448
                    rotation = right
                    size = 128, 256
                ]

                component "core/Signal Controlled Current Source" ih_a {
                    execution_rate = "Ts_Control"
                }
                [
                    position = 8384, 8116
                    size = 64, 32
                ]

                component "core/Signal Controlled Current Source" ih_b {
                    execution_rate = "Ts_Control"
                }
                [
                    position = 8396, 8236
                    size = 64, 32
                ]

                component "core/Signal Controlled Current Source" ih_c {
                    execution_rate = "Ts_Control"
                }
                [
                    position = 8396, 8324
                    size = 64, 32
                ]

                port a {
                    position = left:1
                    kind = pe
                }
                [
                    position = 8064, 8108
                ]

                port b {
                    position = left:2
                    kind = pe
                }
                [
                    position = 8040, 8236
                ]

                port c {
                    position = left:3
                    kind = pe
                }
                [
                    position = 8036, 8328
                ]

                tag Goto43 {
                    value = "ih5_a"
                    scope = global
                    kind = sp
                    direction = in
                }
                [
                    position = 7700, 7864
                    rotation = down
                    hide_name = True
                    scale = -1, 1
                    size = 60, 20
                ]

                tag Goto44 {
                    value = "ih5_b"
                    scope = global
                    kind = sp
                    direction = in
                }
                [
                    position = 7700, 7956
                    rotation = down
                    hide_name = True
                    scale = -1, 1
                    size = 60, 20
                ]

                tag Goto45 {
                    value = "ih5_c"
                    scope = global
                    kind = sp
                    direction = in
                }
                [
                    position = 7680, 8032
                    rotation = down
                    hide_name = True
                    scale = -1, 1
                    size = 60, 20
                ]

                tag From2 {
                    value = "ih5_a"
                    scope = global
                    kind = sp
                    direction = out
                }
                [
                    position = 7908, 8036
                    size = 60, 20
                ]

                tag From3 {
                    value = "ih5_b"
                    scope = global
                    kind = sp
                    direction = out
                }
                [
                    position = 7912, 8176
                    size = 60, 20
                ]

                tag From4 {
                    value = "ih5_c"
                    scope = global
                    kind = sp
                    direction = out
                }
                [
                    position = 7916, 8288
                    size = 60, 20
                ]

                junction Junction1 pe
                [
                    position = 8444, 8236
                ]

                junction Junction2 pe
                [
                    position = 8228, 8520
                ]

                junction Junction3 pe
                [
                    position = 8132, 8116
                ]

                junction Junction4 pe
                [
                    position = 8232, 8236
                ]

                junction Junction5 pe
                [
                    position = 8332, 8324
                ]

                connect ih_b.n_node Junction1 as Connection829
                connect Junction1 ih_a.n_node as Connection830
                connect ih_c.n_node Junction1 as Connection831
                connect "Sinusoidal Source1.out" Goto43 as Connection832
                connect "Sinusoidal Source2.out" Goto44 as Connection833
                connect "Sinusoidal Source3.out" Goto45 as Connection834
                connect From2 ih_a.in as Connection835
                connect From3 ih_b.in as Connection836
                connect From4 ih_c.in as Connection837
                connect "Capacitor and dampin resistor.P3_neg" Junction2 as Connection839
                connect Junction2 "Capacitor and dampin resistor.P2_neg" as Connection840
                connect "Capacitor and dampin resistor.P1_neg" Junction2 as Connection841
                connect ih_a.p_node Junction3 as Connection842
                connect Junction3 a as Connection843
                connect "Capacitor and dampin resistor.P3_pos" Junction3 as Connection844
                connect ih_b.p_node Junction4 as Connection845
                connect Junction4 b as Connection846
                connect "Capacitor and dampin resistor.P2_pos" Junction4 as Connection847
                connect ih_c.p_node Junction5 as Connection848
                connect Junction5 c as Connection849
                connect "Capacitor and dampin resistor.P1_pos" Junction5 as Connection850
            }
            [
                position = 8480, 7504
                size = 160, 144
            ]

            component "core/Three Phase Diode Rectifier" "Three Phase Diode Rectifier1" {
            }
            [
                position = 9864, 7492
                size = 127, 256
            ]

            component "core/Resistor" R1 {
                resistance = "1e2"
            }
            [
                position = 10152, 7484
                rotation = right
            ]

            component "core/Current Measurement" ih_a {
                addr = "14"
                execution_rate = "Tfast"
                sig_output = "True"
            }
            [
                position = 9432, 7396
                scale = 1, -1
                size = 64, 32
            ]

            component "core/Current Measurement" ih_b {
                addr = "14"
                execution_rate = "Tfast"
                sig_output = "True"
            }
            [
                position = 9432, 7496
                scale = 1, -1
                size = 64, 32
            ]

            component "core/Current Measurement" ih_c {
                addr = "14"
                execution_rate = "Tfast"
                sig_output = "True"
            }
            [
                position = 9432, 7600
                scale = 1, -1
                size = 64, 32
            ]

            component "core/Triple Pole Single Throw Contactor" S2 {
                ctrl_src = "Model"
            }
            [
                position = 9596, 7504
                size = 64, 256
            ]

            component "core/Step" contactor1 {
                execution_rate = "Ts_Control"
                step_time = "T_on_harmonic"
            }
            [
                position = 9364, 7248
            ]

            tag From2 {
                value = "modulator"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 7544, 7920
                size = 60, 20
            ]

            tag Goto22 {
                value = "vs_a"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 10084, 8368
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto23 {
                value = "vs_b"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 10084, 8416
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto24 {
                value = "vs_c"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 10084, 8464
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto25 {
                value = "is_c"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8496, 8300
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto26 {
                value = "is_b"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8480, 8204
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto27 {
                value = "is_a"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8484, 8108
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto42 {
                value = "v_dc"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 7436, 8152
                hide_name = True
                size = 60, 20
            ]

            tag Goto43 {
                value = "ig_a"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 9772, 8020
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto44 {
                value = "ig_b"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 9760, 8120
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto45 {
                value = "ig_c"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 9768, 8212
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto46 {
                value = "ih_a"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 9164, 7440
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto47 {
                value = "ih_b"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 9064, 7544
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto48 {
                value = "ih_c"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 9040, 7660
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            junction Junction150 pe
            [
                position = 7340, 8056
            ]

            junction Junction163 pe
            [
                position = 10252, 8520
            ]

            junction Junction164 pe
            [
                position = 10252, 8520
            ]

            junction Junction215 pe
            [
                position = 7336, 8248
            ]

            junction Junction219 pe
            [
                position = 8288, 8544
            ]

            junction Junction220 pe
            [
                position = 8192, 8060
            ]

            junction Junction221 pe
            [
                position = 8288, 8156
            ]

            junction Junction222 pe
            [
                position = 8384, 8252
            ]

            junction Junction223 pe
            [
                position = 10180, 8068
            ]

            junction Junction224 pe
            [
                position = 9328, 8060
            ]

            junction Junction225 pe
            [
                position = 9172, 8252
            ]

            junction Junction226 pe
            [
                position = 10332, 8260
            ]

            junction Junction227 pe
            [
                position = 10248, 8164
            ]

            junction Junction228 pe
            [
                position = 9236, 8156
            ]

            junction Junction229 pe
            [
                position = 9176, 7732
            ]

            junction Junction230 pe
            [
                position = 9236, 7808
            ]

            junction Junction231 pe
            [
                position = 9328, 7872
            ]

            comment Comment2 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Three Phase Inverter</p></body></html> ENDCOMMENT 
            [
                position = 7592, 7832
            ]

            comment Comment3 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16pt;">Grid</span>   </p></body></html> ENDCOMMENT 
            [
                position = 10584, 8072
            ]

            comment Comment4 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">LCL filter</p></body></html> ENDCOMMENT 
            [
                position = 8348, 7816
            ]

            connect contactor.out S1.ctrl_in as Connection730
            connect "Bus Split1.out2" "Three Phase Inverter.InC" as Connection5
            connect C.out "Three Phase Inverter.En" as Connection6
            [
                breakpoints = 7696, 8016; 7696, 8016
            ]
            connect From2 "Bus Split1.in" as Connection10
            connect Goto22 vs_a.out as Connection288
            connect Goto23 v_sb.out as Connection289
            connect Goto24 vs_c.out as Connection290
            connect Junction150 Idc_link.p_node as Connection161
            connect Junction163 gnd3.node as Connection253
            connect Junction164 Junction163 as Connection256
            connect "Three Phase Inverter.InB" "Bus Split1.out1" as Connection66
            connect VDC.p_node Junction150 as Connection162
            connect vs_a.n_node Junction164 as Connection255
            connect v_sb.n_node Junction163 as Connection252
            connect vs_c.n_node Junction164 as Connection257
            connect Vgrid.n_node gnd4.node as Connection87
            connect "Bus Split1.out" "Three Phase Inverter.InA" as Connection431
            [
                breakpoints = 7712, 7904
            ]
            connect Goto27 is_a.out as Connection703
            connect Goto26 is_b.out as Connection704
            connect Goto25 is_c.out as Connection705
            connect Idc_link.n_node "Three Phase Inverter.pos_out" as Connection709
            connect Junction215 VDC.n_node as Connection711
            connect "Three Phase Inverter.neg_out" Junction215 as Connection712
            connect Goto42 VDC.out as Connection714
            connect "VSC side inductor_Rt_Lt.P2_pos" "Three Phase Inverter.b_in" as Connection734
            connect "Three Phase Inverter.c_in" "VSC side inductor_Rt_Lt.P3_pos" as Connection735
            connect "VSC side inductor_Rt_Lt.P1_pos" "Three Phase Inverter.a_in" as Connection736
            connect "Capacitor and dampin resistor.P3_neg" Junction219 as Connection750
            [
                breakpoints = 8192, 8544
            ]
            connect Junction219 "Capacitor and dampin resistor.P2_neg" as Connection751
            [
                breakpoints = 8288, 8544
            ]
            connect "Capacitor and dampin resistor.P1_neg" Junction219 as Connection752
            connect is_a.p_node Junction220 as Connection753
            connect Junction220 "VSC side inductor_Rt_Lt.P1_neg" as Connection754
            connect "Capacitor and dampin resistor.P3_pos" Junction220 as Connection755
            connect "VSC side inductor_Rt_Lt.P2_neg" Junction221 as Connection756
            connect Junction221 is_b.p_node as Connection757
            connect "Capacitor and dampin resistor.P2_pos" Junction221 as Connection758
            connect is_c.p_node Junction222 as Connection759
            connect Junction222 "VSC side inductor_Rt_Lt.P3_neg" as Connection760
            connect "Capacitor and dampin resistor.P1_pos" Junction222 as Connection761
            connect "Grid side inductor_Rs_Ls.P2_pos" is_b.n_node as Connection762
            connect "Grid side inductor_Rs_Ls.P3_pos" is_c.n_node as Connection763
            connect is_a.n_node "Grid side inductor_Rs_Ls.P1_pos" as Connection764
            connect "Grid side inductor_Rs_Ls.P1_neg" S1.a_in as Connection765
            connect "Grid side inductor_Rs_Ls.P2_neg" S1.b_in as Connection766
            connect "Grid side inductor_Rs_Ls.P3_neg" S1.c_in as Connection767
            connect Cdc1.p_node Rdc.p_node as Connection769
            connect Cdc1.n_node Junction215 as Connection774
            connect Rdc.n_node Junction150 as Connection773
            connect "Bus Join1.out" "VBR Variable Load1.Inputs" as Connection784
            connect enable_load.out "Bus Join1.in" as Connection785
            connect P_ref_load.out "Bus Join1.in1" as Connection786
            connect Q_ref_load.out "Bus Join1.in2" as Connection787
            connect "Bus Split2.in" "VBR Variable Load1.Output" as Connection788
            connect p_load.in "Bus Split2.out" as Connection789
            connect q_load.in "Bus Split2.out1" as Connection790
            connect Vgrid.a_node Junction223 as Connection797
            [
                breakpoints = 10396, 8060; 10180, 8060
            ]
            connect Junction223 vs_a.p_node as Connection798
            [
                breakpoints = 10180, 8068
            ]
            connect ig_a.p_node Junction223 as Connection799
            connect Junction224 S1.a_out as Connection801
            [
                breakpoints = 9328, 8060
            ]
            connect ig_a.n_node Junction224 as Connection802
            connect Junction225 S1.c_out as Connection804
            [
                breakpoints = 9172, 8252
            ]
            connect ig_c.n_node Junction225 as Connection805
            connect vs_c.p_node Junction226 as Connection806
            connect Junction226 Vgrid.c_node as Connection807
            [
                breakpoints = 10336, 8260
            ]
            connect ig_c.p_node Junction226 as Connection808
            connect Vgrid.b_node Junction227 as Connection809
            connect Junction227 v_sb.p_node as Connection810
            [
                breakpoints = 10252, 8164
            ]
            connect ig_b.p_node Junction227 as Connection811
            connect Junction228 S1.b_out as Connection813
            [
                breakpoints = 9236, 8156
            ]
            connect ig_b.n_node Junction228 as Connection814
            connect Goto43 ig_a.out as Connection815
            connect Goto44 ig_b.out as Connection816
            connect Goto45 ig_c.out as Connection817
            connect R1.p_node "Three Phase Diode Rectifier1.pos_out" as Connection839
            connect R1.n_node "Three Phase Diode Rectifier1.neg_out" as Connection840
            connect "VBR Variable Load1.C" Junction229 as Connection847
            connect Junction229 Junction225 as Connection848
            [
                breakpoints = 9172, 7732
            ]
            connect ih_c.p_node Junction229 as Connection849
            connect Junction228 Junction230 as Connection850
            connect Junction230 "VBR Variable Load1.B" as Connection851
            [
                breakpoints = 9236, 7804
            ]
            connect ih_b.p_node Junction230 as Connection852
            connect Junction224 Junction231 as Connection853
            [
                breakpoints = 9328, 8060
            ]
            connect Junction231 "VBR Variable Load1.A" as Connection854
            [
                breakpoints = 9332, 7876; 9336, 7876
            ]
            connect ih_a.p_node Junction231 as Connection855
            connect Goto46 ih_a.out as Connection856
            connect Goto47 ih_b.out as Connection857
            connect Goto48 ih_c.out as Connection858
            connect S2.c_in ih_c.n_node as Connection859
            connect S2.c_out "Three Phase Diode Rectifier1.c_in" as Connection860
            connect "Three Phase Diode Rectifier1.b_in" S2.b_out as Connection861
            connect S2.b_in ih_b.n_node as Connection862
            connect ih_a.n_node S2.a_in as Connection863
            connect S2.a_out "Three Phase Diode Rectifier1.a_in" as Connection864
            connect contactor1.out S2.ctrl_in as Connection865
        }
        [
            position = 8256, 8304
            size = 248, 224
        ]

        component "core/Probe" ig_a {
            execution_rate = "Ts_Control"
            signal_access = "Inherit"
        }
        [
            position = 9012, 8808
        ]

        component "core/Probe" ig_b {
            execution_rate = "Ts_Control"
            signal_access = "Inherit"
        }
        [
            position = 9012, 8872
        ]

        component "core/Probe" ig_c {
            execution_rate = "Ts_Control"
            signal_access = "Inherit"
        }
        [
            position = 9012, 8940
        ]

        component "core/Scope" ig_abc {
            selected_signals = "[\"ig_a\", \"ig_b\", \"ig_c\"]"
            signals_data = "{\"signals\": {\"ig_a\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#FF0000\"}, \"display\": {\"1\": \"solid\"}}, \"ig_b\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#00CC00\"}, \"display\": {\"1\": \"solid\"}}, \"ig_c\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#0099FF\"}, \"display\": {\"1\": \"solid\"}}}, \"viewports\": {\"1\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"2\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"3\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"4\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}}, \"plot_settings\": {\"layout\": \"Vertical\", \"background_color\": \"white\", \"legend_visible\": true}}"
        }
        [
            position = 9140, 8884
        ]

        tag From50 {
            value = "p"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 8464, 8540
            hide_name = True
            size = 60, 20
        ]

        tag From51 {
            value = "q"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 8460, 8608
            hide_name = True
            size = 60, 20
        ]

        tag From52 {
            value = "p_fil"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 8464, 8680
            hide_name = True
            size = 60, 20
        ]

        tag From75 {
            value = "is_a"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 8872, 8580
            hide_name = True
            size = 60, 20
        ]

        tag From76 {
            value = "is_b"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 8872, 8644
            hide_name = True
            size = 60, 20
        ]

        tag From77 {
            value = "is_c"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 8872, 8712
            hide_name = True
            size = 60, 20
        ]

        tag From44 {
            value = "vs_a"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 7868, 8544
            hide_name = True
            size = 60, 20
        ]

        tag From45 {
            value = "vs_b"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 7864, 8600
            hide_name = True
            size = 60, 20
        ]

        tag From46 {
            value = "vs_c"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 7864, 8656
            hide_name = True
            size = 60, 20
        ]

        tag From47 {
            value = "is_a"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 7864, 8712
            rotation = down
            hide_name = True
            scale = -1, 1
            size = 60, 20
        ]

        tag From48 {
            value = "is_b"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 7864, 8768
            rotation = down
            hide_name = True
            scale = -1, 1
            size = 60, 20
        ]

        tag From49 {
            value = "is_c"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 7864, 8824
            rotation = down
            hide_name = True
            scale = -1, 1
            size = 60, 20
        ]

        tag Goto32 {
            value = "p"
            scope = global
            kind = sp
            direction = in
        }
        [
            position = 8272, 8552
            hide_name = True
            size = 60, 20
        ]

        tag Goto33 {
            value = "q"
            scope = global
            kind = sp
            direction = in
        }
        [
            position = 8272, 8640
            hide_name = True
            size = 60, 20
        ]

        tag Goto34 {
            value = "p_fil"
            scope = global
            kind = sp
            direction = in
        }
        [
            position = 8272, 8728
            hide_name = True
            size = 60, 20
        ]

        tag Goto35 {
            value = "q_fil"
            scope = global
            kind = sp
            direction = in
        }
        [
            position = 8272, 8816
            hide_name = True
            size = 60, 20
        ]

        tag From78 {
            value = "q_fil"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 8464, 8756
            hide_name = True
            size = 60, 20
        ]

        tag From79 {
            value = "ig_a"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 8888, 8808
            hide_name = True
            size = 60, 20
        ]

        tag From80 {
            value = "ig_b"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 8888, 8872
            hide_name = True
            size = 60, 20
        ]

        tag From81 {
            value = "ig_c"
            scope = global
            kind = sp
            direction = out
        }
        [
            position = 8888, 8940
            hide_name = True
            size = 60, 20
        ]

        comment Comment8 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16pt;">Scope component can be found under TyphoonSim category in the core library. </span></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16pt;">Within it you can select the signals to be visualized,</span></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16pt;">then press Start Simulation button and observe the results. </span><span style=" font-size:18pt;">  </span>                </p></body></html> ENDCOMMENT 
        [
            position = 8124, 8040
        ]

        connect p.in From50 as Connection451
        [
            breakpoints = 8572, 8540; 8556, 8540; 8560, 8540; 8512, 8540
        ]
        connect From51 q.in as Connection453
        connect From52 p_fil.in as Connection455
        connect From75 is_a.in as Connection715
        connect From76 is_b.in as Connection716
        connect From77 is_c.in as Connection717
        connect Goto32 "C function powers.p" as Connection450
        connect Goto33 "C function powers.q" as Connection452
        connect "C function powers.p_f" Goto34 as Connection454
        connect From44 "C function powers.v_a" as Connection654
        connect "C function powers.v_b" From45 as Connection655
        connect From46 "C function powers.v_c" as Connection656
        connect From47 "C function powers.i_a" as Connection657
        connect From48 "C function powers.i_b" as Connection658
        connect From49 "C function powers.i_c" as Connection659
        connect Goto35 "C function powers.q_f" as Connection718
        connect From78 q_fil.in as Connection719
        connect From79 ig_a.in as Connection720
        connect From80 ig_b.in as Connection721
        connect From81 ig_c.in as Connection722
    }

    logically_deleted {
        "Controller.Integrator1"
        "Controller.Sum1"
        "Controller.Product1"
        "Controller.Gain1"
        "Controller.Integrator2"
        "Controller.From99"
        "Controller.Junction221"
        "Controller.Connection815"
        "Controller.Connection817"
        "Controller.Connection819"
        "Controller.Connection820"
        "Controller.Connection821"
        "Controller.Connection822"
        "Controller.Connection823"
        "Controller.Connection894"
        "Plant.non_linear_load"
    }

    default {
        "core/Bus Join" {
            inputs = "2"
            execution_rate = "inherit"
        }

        "core/Bus Split" {
            outputs = "2"
            execution_rate = "inherit"
        }

        "core/C function" {
            input_terminals = "real in;"
            input_terminals_show_labels = "False;"
            input_terminals_feedthrough = "True;"
            input_terminals_dimensions = "inherit;"
            output_terminals = "real out;"
            output_terminals_show_labels = "False;"
            output_terminals_feedthrough = "True;"
            output_terminals_dimensions = "inherit;"
            output_fnc = ""
            update_fnc = ""
            init_fnc = ""
            global_variables = ""
            parameters = ""
            library_load_type = "Compile-time load"
            dll_file_path = ""
            dll_file_path_full = ""
            arm_a9_file_path = ""
            arm_a9_file_path_full = ""
            arm_a53_file_path = ""
            arm_a53_file_path_full = ""
            h_file_path = ""
            h_file_path_full = ""
            add_src_path = ""
            add_src_path_full = ""
            convert_to_relative_dll = "True"
            convert_to_relative_a = "True"
            convert_to_relative_src = "True"
            arb_defs = ""
            add_macros = ""
            skip_pre_cmpl_check = "False"
            generate_for_hil = "True"
            execution_rate = "inherit"
            _supported_platforms = "[\'generic\']"
            refresh = "refresh"
        }

        "core/Capacitor" {
            signal_access = "inherit"
            capacitance = "1e-6"
            initial_voltage = "0"
            pole_shift_ignore = "False"
            visible = "True"
        }

        "core/Clock" {
            enb_reset = "False"
            reset_at = "1.0"
            execution_rate = "100e-6"
        }

        "core/Constant" {
            value = "1"
            signal_type = "real"
            execution_rate = "100e-6"
            _tunable = "False"
        }

        "core/Discrete Transfer Function" {
            domain = "Z-domain"
            method = "Zero-order hold"
            b_coeff = "[1,1]"
            a_coeff = "[1,1]"
            signal_out_type = "inherit"
            execution_rate = "inherit"
        }

        "core/Gain" {
            gain = "1"
            multiplication = "Element-wise(K.*u)"
            _tunable = "False"
            execution_rate = "inherit"
        }

        "core/Integrator" {
            show_reset = "none"
            reset_type = "asynchronous"
            show_init_condition = "internal"
            init_value = "0"
            limit_output = "False"
            limit_upper = "inf"
            limit_lower = "-inf"
            show_state = "False"
            state_port_type = "inherit"
            execution_rate = "inherit"
        }

        "core/Limit" {
            upper_limit = "[\'inf\']"
            lower_limit = "[\'-inf\']"
            execution_rate = "inherit"
        }

        "core/Probe" {
            signal_access = "inherit"
            addr = "0"
            override_signal_name = "False"
            signal_name = ""
            signal_type = "generic"
            streaming_en = "False"
            streaming_er_idx = "0"
            execution_rate = "inherit"
        }

        "core/Product" {
            signs = "2"
            execution_rate = "inherit"
        }

        "core/Ramp" {
            slope = "1"
            start_time = "0"
            initial_output = "0"
            execution_rate = "100e-6"
        }

        "core/Resistor" {
            resistance = "1"
            param_set = ""
        }

        "core/Scope" {
            signals_data = "{}"
            selected_signals = "[]"
        }

        "core/Sinusoidal Source" {
            amplitude = "1"
            dc_offset = "0"
            frequency = "50"
            phase = "0"
            execution_rate = "100e-6"
            _tunable = "False"
        }

        "core/Step" {
            step_time = "1"
            initial_value = "0"
            final_value = "1"
            signal_type = "real"
            execution_rate = "100e-6"
        }

        "core/Sum" {
            signs = "2"
            execution_rate = "inherit"
        }

        "core/Termination" {
            execution_rate = "inherit"
        }

        "core/Current Measurement" {
            signal_access = "inherit"
            bw_limit = "False"
            frequency = "10e3"
            comparator_enable = "False"
            operator = "greater"
            threshold = "0"
            cmp_abs_value = "False"
            feed_forward = "false"
            sig_output = "False"
            sig_output_filt_and_full_bw = "False"
            execution_rate = "100e-6"
            addr = "0"
            nd_msr_estimation = "false"
            dev_cpl_msr = "false"
            host_device = "0"
            output_to_device = "0"
            dev_cpl_index = "0"
            dev_cpl_var_nb = "0"
            visible = "True"
            override_signal_name = "False"
            signal_name = ""
        }

        "core/Series RLC Branch" {
            num_phases = "Single-Phase"
            branch_type = "RLC"
            resistance = "10"
            inductance = "10e-3"
            initial_current = "0"
            capacitance = "10e-6"
            initial_voltage = "0"
        }

        "core/Signal Controlled Current Source" {
            execution_rate = "inherit"
        }

        "core/Three Phase Diode Rectifier" {
            signal_access = "inherit"
            show_monitoring = "False"
            losses_estimation = "False"
            Import_diode_xml = "not selected"
            Vd = "1.2"
            Rd = "0"
            i_sw = "[0.0, 6.0, 12.0, 18.0, 24.0]"
            v_sw = "[0.0, 600.0]"
            temp_sw = "[25.0, 50.0, 75.0, 100.0, 125.0]"
            vd_table_out = "[1.2, 1.2, 1.2, 1.2, 1.2]"
            ed_off_table_out = "[[0.0, 0.0275e-3, 0.15e-3, 0.275e-3, 0.3e-3], [0.35*2.2e-3, 0.4*2.2e-3, 0.8*2.2e-3, 0.68*2.2e-3, 0.9*2.2e-3], [0.65*2.2e-3, 0.9*2.2e-3, 1.2*2.2e-3, 1.5*2.2e-3, 1.7*2.2e-3], [0.9*2.2e-3, 1.3*2.2e-3, 1.7*2.2e-3, 1.9*2.2e-3, 2.25*2.2e-3], [1.1*2.2e-3, 1.7*2.2e-3, 2.1*2.2e-3, 2.3*2.2e-3, 2.5*2.2e-3]]"
            temp_estimation = "False"
            thermal_networks_type = "Foster"
            diode_Rth = "[0.159, 0.133, 0.120, 0.038]"
            diode_Tth = "[1.1e-1, 1.56e-2, 1.35e-3, 1.51e-4]"
            diode_Cth = "[0.0029, 0.0097, 0.1068, 0.8500]"
            loss_exec_rate = "100e-6"
            visualize_luts = "Visualize Lookup Tables"
            PESB_Optimization = "True"
        }

        "core/Three Phase Inverter" {
            signal_access = "inherit"
            ctrl_src = "Digital input per switch"
            op_mode = "Fixed carrier frequency"
            carrier_freq = "10000.0"
            carr_ph_offset = "0.0"
            d_time = "5e-6"
            ref_sig_min_max = "[-1.0, 1.0]"
            load_mode = "on min"
            execution_rate = "inherit"
            Sa_top = "1"
            Sa_top_logic = "active high"
            Sa_bot = "2"
            Sa_bot_logic = "active high"
            Sb_top = "3"
            Sb_top_logic = "active high"
            Sb_bot = "4"
            Sb_bot_logic = "active high"
            Sc_top = "5"
            Sc_top_logic = "active high"
            Sc_bot = "6"
            Sc_bot_logic = "active high"
            delay_enabled = "False"
            fixed_delay = "1e-6"
            var_delay_lut = "[-10.0, 1e-6, 10.0, 1e-6]"
            preview_var_delay = "Preview"
            Sa_top_I = "False"
            Sa_bot_I = "False"
            Sb_top_I = "False"
            Sb_bot_I = "False"
            Sc_top_I = "False"
            Sc_bot_I = "False"
            fvd = "False"
            losses_estimation = "False"
            fvd_def_method = "Voltage and Resistance"
            Import_igbt_xml = "not selected"
            Import_diode_xml = "not selected"
            Switch_type = "IGBT"
            Vce = "1.3"
            Rce = "0"
            Vd = "1.2"
            Rd = "0"
            i_sw = "[0.0, 6.0, 12.0, 18.0, 24.0]"
            v_sw = "[0.0, 600.0]"
            temp_sw = "[25.0, 50.0, 75.0, 100.0, 125.0]"
            vce_table_out = "[1.3, 1.3, 1.3, 1.3, 1.3]"
            vd_table_out = "[1.2, 1.2, 1.2, 1.2, 1.2]"
            et_on_table_out = "[[0.0, 0.0275e-3, 0.15e-3, 0.275e-3, 0.3e-3], [0.35*3.8e-3, 0.4*3.8e-3, 0.8*3.8e-3, 0.68*3.8e-3, 0.9*3.8e-3], [0.65*3.8e-3, 0.9*3.8e-3, 1.2*3.8e-3, 1.5*3.8e-3, 1.7*3.8e-3], [0.9*3.8e-3, 1.3*3.8e-3, 1.7*3.8e-3, 1.9*3.8e-3, 2.25*3.8e-3], [1.1*3.8e-3, 1.7*3.8e-3, 2.1*3.8e-3, 2.3*3.8e-3, 2.5*3.8e-3]]"
            et_off_table_out = "[[0.0, 0.0275e-3, 0.15e-3, 0.275e-3, 0.3e-3], [0.35*2.1e-3, 0.4*2.1e-3, 0.8*2.1e-3, 0.68*2.1e-3, 0.9*2.1e-3], [0.65*2.1e-3, 0.9*2.1e-3, 1.2*2.1e-3, 1.5*2.1e-3, 1.7*2.1e-3], [0.9*2.1e-3, 1.3*2.1e-3, 1.7*2.1e-3, 1.9*2.1e-3, 2.25*2.1e-3], [1.1*2.1e-3, 1.7*2.1e-3, 2.1*2.1e-3, 2.3*2.1e-3, 2.5*2.1e-3]]"
            ed_off_table_out = "[[0.0, 0.0275e-3, 0.15e-3, 0.275e-3, 0.3e-3], [0.35*2.2e-3, 0.4*2.2e-3, 0.8*2.2e-3, 0.68*2.2e-3, 0.9*2.2e-3], [0.65*2.2e-3, 0.9*2.2e-3, 1.2*2.2e-3, 1.5*2.2e-3, 1.7*2.2e-3], [0.9*2.2e-3, 1.3*2.2e-3, 1.7*2.2e-3, 1.9*2.2e-3, 2.25*2.2e-3], [1.1*2.2e-3, 1.7*2.2e-3, 2.1*2.2e-3, 2.3*2.2e-3, 2.5*2.2e-3]]"
            temp_estimation = "False"
            thermal_networks_type = "Foster"
            switch_Rth = "[0.159, 0.133, 0.120, 0.038]"
            switch_Tth = "[1.1e-1, 1.56e-2, 1.35e-3, 1.51e-4]"
            switch_Cth = "[0.0029, 0.0097, 0.1068, 0.8500]"
            diode_Rth = "[0.159, 0.133, 0.120, 0.038]"
            diode_Tth = "[1.1e-1, 1.56e-2, 1.35e-3, 1.51e-4]"
            diode_Cth = "[0.0029, 0.0097, 0.1068, 0.8500]"
            loss_exec_rate = "100e-6"
            visualize_luts = "Visualize Lookup Tables"
            vout_cmp_pullup_mode = "False"
            vout_cmp_timeout = "5e-6"
            PESB_Optimization = "True"
            show_cnt_out = "False"
            show_monitoring = "False"
            _control_property = "all high"
            pwm_enabling = "False"
            pwm_enable_di = "13"
            pwm_enable_inv = "active high"
            dtv_flag_en = "True"
        }

        "core/Three Phase Voltage Source" {
            init_rms_value = "0.0"
            init_frequency = "50.0"
            init_phase = "0.0"
        }

        "core/Triple Pole Single Throw Contactor" {
            signal_access = "inherit"
            switches_option = "False"
            resistance = "1.0"
            ctrl_src = "Digital input"
            Sa = "1"
            Sa_logic = "active high"
            enable_fb_out = "False"
            fb_out_type = "real"
            execution_rate = "inherit"
            dtsm_switch_name = ""
            initial_state = "off"
            on_delay = "0"
            off_delay = "0"
            switching = "zero current"
            hide_int_meas = "False"
        }

        "core/VBR Variable Load" {
            Vn = "480"
            Sn = "640e3"
            fn = "60"
            L = "1e-4"
            execution_rate = "inherit"
            Id_Kp = "0.003"
            Id_Ki = "30"
            Iq_Kp = "0.003"
            Iq_Ki = "30"
            powerRate = "1"
            Rsnub = "1e3"
        }

        "core/Voltage Measurement" {
            signal_access = "inherit"
            bw_limit = "False"
            frequency = "10e3"
            comparator_enable = "False"
            operator = "greater"
            threshold = "0"
            cmp_abs_value = "False"
            feed_forward = "false"
            sig_output = "False"
            sig_output_filt_and_full_bw = "False"
            execution_rate = "100e-6"
            addr = "0"
            nd_msr_estimation = "false"
            dev_cpl_msr = "false"
            host_device = "0"
            output_to_device = "0"
            dev_cpl_index = "0"
            dev_cpl_var_nb = "0"
            visible = "True"
            override_signal_name = "False"
            signal_name = ""
        }
    }

    CODE model_init
        # Numpy module is imported as 'np'
        # Scipy module is imported as 'sp'
        Tfast = 50e-6
        Ts_Control = 50e-6
        #LPF power
        fc= 30
        # Filter parameter
        Lt=2.5e-3
        Rt=.1
        Ls=2.5e-3
        Rs=.1
        Rd = 27
        C = 1e-6
        
        # DC link parameters
        C_dc = 2200e-6
        vdc_ini = 560
        # Switching frequency
        fs = 10e3
        #dead time
        dt = 0.1e-6
        
        #PLL control gains
        K_p_pll = 1.8
        K_i_pll = 1.8/0.00251
        
        #PI current controller gains
        tau_c = 1e-3
        L = Ls + Lt
        R = Rs + Rt
        Kp_i = L/tau_c
        Ki_i = R/tau_c
        
        #PI voltage controller gains
        tau_v = 10*tau_c
        Kp_dc = C_dc/tau_v
        Ki_dc = 10*Kp_dc
        
        #Ton contactor
        T_on_contactor = 0.1
        
        #Reactive power compensation
        Kp_qref = 0.01
        Ki_qref = 10
        T_on_react_com = 1.0
        #harmonic
        T_on_harmonic = 0.0
        omega_2=(2*np.pi*50*6)*(2*np.pi*50*6)
        delta = 0.002
    ENDCODE
}
