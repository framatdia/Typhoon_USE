version = 4.2

//
// Saved by sw version: 2025.1 SP1
//

model "dq_pivsg_ctrl_v3_sim" {
    configuration {
        hil_device = "HIL404"
        hil_configuration_id = 5
        simulation_method = trapezoidal
        simulation_time_step = 1e-6
        simulation_discret_scaling = 1.0
        dsp_timer_periods = 100e-6, 50e-3
        ss_calc_method = "systematic elimination"
        enb_pole_shift = True
        enb_gds_oversampling = True
        show_modes = False
        device_ao_limit_enable = False
        reset_analog_outputs_on_sim_stop = True
        reset_analog_outputs_on_sim_stop_mode = Offset values
        reset_digital_outputs_on_sim_stop = True
        vhil_adio_loopback = False
        cpl_stb = False
        enb_dep_sw_detect = False
        code_section = "internal memory"
        data_section = "internal memory"
        sys_sp_rate_1 = 0.0001
        sys_sp_rate_2 = 0.05
        sys_real_type_precision = "default"
        user_real_type_precision = "default"
        sys_cpu_optimization = "high"
        user_cpu_optimization = "high"
        user_cpu_part_option = "default"
        matrix_based_reduction = True
        cpl_dynamics_analysis = False
        export_ss_to_pickle = False
        ground_scope_core = False
        dss_num_tol = 1e-15
        cce_platform = "generic"
        cce_use_relative_names = False
        cce_type_mapping_real = "double"
        cce_type_mapping_uint = "unsigned int"
        cce_type_mapping_int = "int"
        cce_platform = "generic"
        cce_use_relative_names = False
        cce_type_mapping_real = "double"
        cce_type_mapping_uint = "unsigned int"
        cce_type_mapping_int = "int"
        cce_term_var_location = "local"
        cce_directory = ""
        cce_custom_type_int = ""
        cce_custom_type_uint = ""
        cce_custom_type_real = ""
        tunable_params = "component defined"
        sp_compiler_type = "C compiler"
        sig_stim = "off"
        export_resource_list = ""
        export_dependency_list = ""
        excluded_resource_list = ""
        excluded_component_from_locking_list = ""
        export_out_file = ""
        export_lock_top_level = True
        export_encrypt_library = True
        export_encrypt_resources = True
        solver_type = "DAE"
        integration_method = "BDF"
        max_sim_step = 1e-4
        simulation_time = 3
        abs_tol = 1e-3
        rel_tol = 1e-3
        init_sim_step = 0.1e-6
        r_on_sw = 1e-3
        v_on_diode = 0.2
        data_sampling_rate = 0
        feedthrough_validation_error_level = warning
    }

    component Subsystem Root {
        component Subsystem Controller {
            layout = dynamic
            component "core/C function" "C function dq to abc" {
                arb_defs = "/*Begin code section*/

/*End code section*/"
                execution_rate = "Ts_Control"
                input_terminals = "real dq;real theta;"
                input_terminals_dimensions = "2;1"
                input_terminals_feedthrough = "True;True"
                input_terminals_show_labels = "True;True"
                output_fnc = "/*Begin code section*/
a= cos(theta)*dq[0] - sin(theta)*dq[1];
b= cos(theta -2.0/3.0*M_PI)*dq[0]  - sin(theta-2.0/3.0*M_PI)*dq[1];
c= cos(theta +2.0/3.0*M_PI)*dq[0] - sin(theta+2.0/3.0*M_PI)*dq[1];
/*End code section*/"
                output_terminals = "real a;real b;real c;"
                output_terminals_dimensions = "1;1;1"
                output_terminals_feedthrough = "True;True;True"
                output_terminals_show_labels = "True;True;True"
            }
            [
                position = 9156, 7572
                size = 176, 152
            ]

            component "core/Bus Join" "Bus Join9" {
                execution_rate = "Ts_Control"
                inputs = "3"
            }
            [
                position = 9348, 7572
            ]

            component "core/C function" "C function VSG" {
                arb_defs = "/*Begin code section*/

/*End code section*/"
                execution_rate = "Ts_Control"
                global_variables = "real x_p;real x_q;real theta;real x_isd;real x_isq;real e_p;real e_q;"
                init_fnc = "/*Begin code section*/
x_p = 0.0;
x_q = 0.0;
theta = 0.0;
x_isd = 0.0;
x_isq = 0.0;
e_p = 0.0;
e_q = 0.0;
/*End code section*/"
                input_terminals = "real p_m_ref;real q_s_ref;real time;real is_abc;real vs_abc;"
                input_terminals_dimensions = "1;1;1;3;3"
                input_terminals_feedthrough = "True;True;True;True;True"
                input_terminals_show_labels = "True;True;True;True;True"
                output_fnc = "/*Begin code section*/
// current dq transformation
is_d= 2.0/3.0*(cos(theta)*is_abc[0] + cos(theta - 2.0/3.0*M_PI)*is_abc[1]  + cos(theta + 2.0/3.0*M_PI)*is_abc[2] );
is_q = 2.0/3.0*(-sin(theta)*is_abc[0] - sin(theta - 2.0/3.0*M_PI)*is_abc[1]  - sin(theta + 2.0/3.0*M_PI)*is_abc[2] );

// voltage dq transformation
vs_d= 2.0/3.0*(cos(theta)*vs_abc[0] + cos(theta - 2.0/3.0*M_PI)*vs_abc[1]  + cos(theta + 2.0/3.0*M_PI)*vs_abc[2] );
vs_q = 2.0/3.0*(-sin(theta)*vs_abc[0] - sin(theta - 2.0/3.0*M_PI)*vs_abc[1]  - sin(theta + 2.0/3.0*M_PI)*vs_abc[2] );

// powers in pu
p_s = (is_d* vs_d + is_q*vs_q)/(I_bdq*U_bdq);
q_s = (is_d* vs_q -  is_q*vs_d)/(I_bdq*U_bdq);

//omega VSG rads
omega_vsg = (Kp_p*e_p + x_p + omega_base)*2.0*M_PI*50.0;
//theta VSG
theta_vsg= theta;

// electromotive force pu
e = e_o + Kp_q*e_q + x_q;

//current references SI
is_dq_ref[0] = -I_bdq*(Xv*e + Rv*vs_d/U_bdq + Xv*vs_q/U_bdq)/(pow(Rv,2)+pow(Xv,2));
is_dq_ref[1] = -I_bdq*(Rv*e + Rv*vs_q/U_bdq - Xv*vs_d/U_bdq)/(pow(Rv,2)+pow(Xv,2));

//current references SI filtered
is_dq_ref_fil[0] = x_isd;
is_dq_ref_fil[1] = x_isq;
/*End code section*/"
                output_terminals = "real is_dq_ref;real omega_vsg;real theta_vsg;real e;real p_s;real q_s;real vs_d;real vs_q;real is_d;real is_q;real is_dq_ref_fil;"
                output_terminals_dimensions = "2;1;1;1;1;1;1;1;1;1;2"
                output_terminals_feedthrough = "True;True;True;True;True;True;True;True;True;True;True"
                output_terminals_show_labels = "True;True;True;True;True;True;True;True;True;True;True"
                parameters = "real Kp_p;real Ki_p;real omega_base;real Kp_q;real Ki_q;real Xv;real Rv;real I_bdq;real e_o;real U_bdq;real Ts_Control;real tau_vsg;"
                update_fnc = "/*Begin code section*/
//active and reactive power error pu
e_p = p_m_ref - p_s;
e_q = q_s_ref - q_s;

//integrator PI active adn reactive power
x_p = x_p + Ki_p*Ts_Control*e_p;
x_q = x_q + Ki_q*Ts_Control*e_q;

//integrator omega rad
theta = theta + omega_vsg*Ts_Control;
if (theta>=2*M_PI){
    theta = theta - 2*M_PI;
}
if (theta<0.0){
    theta = theta + abs(theta);
}

//filter of the reference currents
x_isd = x_isd + Ts_Control*2*M_PI*1/(tau_vsg)*(is_dq_ref[0] - x_isd);
x_isq = x_isq + Ts_Control*2*M_PI*1/(tau_vsg)*(is_dq_ref[1] - x_isq);
/*End code section*/"
            }
            [
                position = 7132, 7512
                size = 232, 520
            ]

            component "core/Bus Join" "Bus Join12" {
                execution_rate = "Ts_Power"
                inputs = "3"
            }
            [
                position = 6800, 7632
            ]

            component "core/Bus Join" "Bus Join13" {
                execution_rate = "Ts_Power"
                inputs = "3"
            }
            [
                position = 6792, 7752
            ]

            component "core/Bus Join" "Bus Join11" {
                execution_rate = "Ts_Control"
            }
            [
                position = 7552, 7524
            ]

            component "core/Bus Join" "Bus Join14" {
                execution_rate = "Ts_Control"
            }
            [
                position = 7604, 7696
            ]

            component "core/Bus Split" "Bus Split1" {
                execution_rate = "Ts_Control"
            }
            [
                position = 6732, 7324
            ]

            component "core/C function" "C function PI current controller" {
                arb_defs = "/*Begin code section*/

/*End code section*/"
                execution_rate = "Ts_Control"
                global_variables = "real y_d;real y_q;real e_d;real e_q;"
                init_fnc = "/*Begin code section*/
e_d = 0.0;
e_q = 0.0;
y_d = 0.0;
y_q = 0.0;
/*End code section*/"
                input_terminals = "real is_dq_ref;real is_dq;real vs_dq;real omega_pll;real v_dc;real time;"
                input_terminals_dimensions = "2;2;2;1;1;1"
                input_terminals_feedthrough = "True;True;True;True;True;True"
                input_terminals_show_labels = "True;True;True;True;True;True"
                output_fnc = "/*Begin code section*/
//modulating signal computation
eta_d = (2/v_dc) * (Kp_i*e_d + y_d -   L*2*M_PI*50*is_dq[1] + vs_dq[0]);
eta_q = (2/v_dc )* (Kp_i*e_q + y_q +  L*2*M_PI*50*is_dq[0] + vs_dq[1]);
/*End code section*/"
                output_terminals = "real eta_d;real eta_q;"
                output_terminals_dimensions = "1;1"
                output_terminals_feedthrough = "True;True"
                output_terminals_show_labels = "True;True"
                parameters = "real Kp_i;real Ki_i;real Ts_Control;real L;real T_on_contactor;"
                update_fnc = "/*Begin code section*/
//error
e_d = is_dq_ref[0] - is_dq[0];
e_q = is_dq_ref[1] - is_dq[1];
//integrator
y_d = y_d + Ki_i*Ts_Control*e_d;
y_q = y_q + Ki_i*Ts_Control*e_q;
if (time<T_on_contactor){
    y_d = 0;
    y_q = 0;
}
/*End code section*/"
            }
            [
                position = 8300, 7512
                size = 256, 320
            ]

            component "core/Bus Join" "Bus Join8" {
                execution_rate = "Ts_Control"
            }
            [
                position = 8528, 7492
            ]

            component "core/Rate Transition" "Rate Transition3" {
                execution_rate = "Ts_Control"
            }
            [
                position = 6916, 7752
                size = 32, 32
            ]

            component "core/Rate Transition" "Rate Transition4" {
                execution_rate = "Ts_Control"
            }
            [
                position = 6912, 7628
                size = 32, 32
            ]

            port vs_a {
                position = auto:auto
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6280, 7452
            ]

            port eta_abc {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 9768, 7300
            ]

            port vs_b {
                position = auto:auto
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6284, 7516
            ]

            port vs_c {
                position = auto:auto
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6288, 7568
            ]

            port is_a {
                position = auto:auto
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6308, 7716
            ]

            port is_b {
                position = auto:auto
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6312, 7780
            ]

            port is_c {
                position = auto:auto
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6316, 7832
            ]

            port is_dq_ref {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 9776, 7396
            ]

            port vs_dq {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 9776, 7468
            ]

            port is_dq {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 9784, 7532
            ]

            port eta_dq {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 9784, 7604
            ]

            port omega {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 9788, 7676
            ]

            port theta {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 9788, 7748
            ]

            port v_dc {
                position = auto:auto
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6324, 7900
            ]

            port pq_ref {
                position = auto:auto
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6320, 8008
            ]

            port time {
                position = auto:auto
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6324, 8080
            ]

            port p_s {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 9788, 7824
            ]

            port q_s {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 9788, 7896
            ]

            tag From72 {
                value = "eta_dq"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 8952, 7508
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From73 {
                value = "theta_vsg"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 8964, 7632
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto41 {
                value = "eta_abc"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 9444, 7572
                hide_name = True
                size = 60, 20
            ]

            tag From74 {
                value = "eta_abc"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 9664, 7300
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto43 {
                value = "vs_a"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 6364, 7452
                hide_name = True
                size = 60, 20
            ]

            tag Goto45 {
                value = "vs_b"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 6368, 7516
                hide_name = True
                size = 60, 20
            ]

            tag Goto46 {
                value = "vs_c"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 6372, 7568
                hide_name = True
                size = 60, 20
            ]

            tag Goto47 {
                value = "is_a"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 6392, 7716
                hide_name = True
                size = 60, 20
            ]

            tag Goto48 {
                value = "is_b"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 6396, 7780
                hide_name = True
                size = 60, 20
            ]

            tag Goto49 {
                value = "is_c"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 6400, 7832
                hide_name = True
                size = 60, 20
            ]

            tag From75 {
                value = "is_dq_ref_fil"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 9684, 7396
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From76 {
                value = "vs_dq"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 9684, 7468
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From77 {
                value = "is_dq"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 9692, 7532
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From78 {
                value = "eta_dq"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 9692, 7604
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From79 {
                value = "omega_vsg"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 9696, 7676
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From80 {
                value = "theta_vsg"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 9696, 7748
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto58 {
                value = "v_dc"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 6408, 7900
                hide_name = True
                size = 60, 20
            ]

            tag Goto42 {
                value = "pq_ref"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 6440, 8008
                hide_name = True
                size = 60, 20
            ]

            tag Goto60 {
                value = "time"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 6444, 8080
                hide_name = True
                size = 60, 20
            ]

            tag From83 {
                value = "p_m_ref"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 6920, 7272
                hide_name = True
                size = 60, 20
            ]

            tag From84 {
                value = "q_s_ref"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 6924, 7392
                hide_name = True
                size = 60, 20
            ]

            tag Goto61 {
                value = "is_dq_ref"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7328, 7272
                hide_name = True
                size = 60, 20
            ]

            tag Goto62 {
                value = "omega_vsg"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7324, 7320
                hide_name = True
                size = 68, 20
            ]

            tag Goto63 {
                value = "theta_vsg"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7324, 7368
                hide_name = True
                size = 68, 20
            ]

            tag Goto64 {
                value = "e"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7324, 7416
                hide_name = True
                size = 68, 20
            ]

            tag Goto50 {
                value = "p_s"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7320, 7464
                hide_name = True
                size = 68, 20
            ]

            tag Goto51 {
                value = "q_s"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7320, 7512
                hide_name = True
                size = 68, 20
            ]

            tag From95 {
                value = "time"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 6928, 7512
                hide_name = True
                size = 60, 20
            ]

            tag From96 {
                value = "is_a"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 6664, 7600
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From97 {
                value = "is_b"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 6672, 7632
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From98 {
                value = "is_c"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 6664, 7676
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From99 {
                value = "vs_a"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 6624, 7728
                hide_name = True
                size = 60, 20
            ]

            tag From100 {
                value = "vs_b"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 6624, 7752
                hide_name = True
                size = 60, 20
            ]

            tag From101 {
                value = "vs_c"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 6624, 7776
                hide_name = True
                size = 60, 20
            ]

            tag Goto65 {
                value = "is_dq_ref_fil"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7356, 7752
                hide_name = True
                size = 92, 20
            ]

            tag Goto66 {
                value = "vs_d"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7320, 7560
                hide_name = True
                size = 68, 20
            ]

            tag Goto56 {
                value = "vs_q"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7316, 7608
                hide_name = True
                size = 68, 20
            ]

            tag Goto57 {
                value = "is_d"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7316, 7656
                hide_name = True
                size = 68, 20
            ]

            tag Goto67 {
                value = "is_q"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7316, 7704
                hide_name = True
                size = 68, 20
            ]

            tag From102 {
                value = "pq_ref"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 6640, 7324
                hide_name = True
                size = 60, 20
            ]

            tag Goto52 {
                value = "is_dq"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7696, 7696
                hide_name = True
                size = 60, 20
            ]

            tag Goto53 {
                value = "vs_dq"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7664, 7516
                hide_name = True
                size = 60, 20
            ]

            tag From108 {
                value = "vs_d"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7452, 7508
                hide_name = True
                size = 60, 20
            ]

            tag From109 {
                value = "vs_q"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7456, 7536
                hide_name = True
                size = 60, 20
            ]

            tag From110 {
                value = "is_d"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7496, 7684
                hide_name = True
                size = 60, 20
            ]

            tag From111 {
                value = "is_q"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7500, 7712
                hide_name = True
                size = 60, 20
            ]

            tag Goto68 {
                value = "p_m_ref"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 6820, 7308
                hide_name = True
                size = 60, 20
            ]

            tag Goto69 {
                value = "q_s_ref"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 6820, 7348
                hide_name = True
                size = 60, 20
            ]

            tag From67 {
                value = "is_dq"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 8092, 7428
                hide_name = True
                size = 60, 20
            ]

            tag From68 {
                value = "vs_dq"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 8092, 7484
                hide_name = True
                size = 60, 20
            ]

            tag From69 {
                value = "omega_vsg"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 8076, 7540
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 92, 20
            ]

            tag From70 {
                value = "v_dc"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 8092, 7596
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto40 {
                value = "eta_dq"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 8632, 7492
                hide_name = True
                size = 60, 20
            ]

            tag From82 {
                value = "time"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 8092, 7652
                hide_name = True
                size = 60, 20
            ]

            tag From103 {
                value = "is_dq_ref_fil"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 8076, 7372
                hide_name = True
                size = 84, 20
            ]

            tag From112 {
                value = "p_s"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 9696, 7824
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From113 {
                value = "q_s"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 9696, 7896
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            comment Comment6 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">dq PI controller with feedforward voltages and cross-coupling terms cancellation</p></body></html> ENDCOMMENT 
            [
                position = 8080, 7132
            ]

            comment Comment7 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">dq to abc transformation</p></body></html> ENDCOMMENT 
            [
                position = 9044, 7136
            ]

            comment Comment8 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Grid-Forming Virtual Synchronous Generator</p></body></html> ENDCOMMENT 
            [
                position = 6980, 7172
            ]

            connect From72 "C function dq to abc.dq" as Connection554
            connect From73 "C function dq to abc.theta" as Connection555
            connect Goto41 "Bus Join9.out" as Connection559
            connect vs_a Goto43 as Connection766
            connect vs_b Goto45 as Connection767
            connect vs_c Goto46 as Connection768
            connect is_a Goto47 as Connection769
            connect is_b Goto48 as Connection770
            connect is_c Goto49 as Connection771
            connect From74 eta_abc as Connection772
            connect is_dq_ref From75 as Connection789
            connect vs_dq From76 as Connection790
            connect "C function dq to abc.a" "Bus Join9.in" as Connection791
            connect "Bus Join9.in1" "C function dq to abc.b" as Connection792
            connect "C function dq to abc.c" "Bus Join9.in2" as Connection793
            connect is_dq From77 as Connection794
            connect eta_dq From78 as Connection795
            connect omega From79 as Connection796
            connect theta From80 as Connection797
            connect v_dc Goto58 as Connection816
            connect Goto42 pq_ref as Connection827
            [
                breakpoints = 6412, 8008; 6396, 8008
            ]
            connect Goto60 time as Connection818
            connect From83 "C function VSG.p_m_ref" as Connection776
            connect From84 "C function VSG.q_s_ref" as Connection777
            connect "C function VSG.is_dq_ref" Goto61 as Connection780
            connect Goto63 "C function VSG.theta_vsg" as Connection781
            connect "C function VSG.omega_vsg" Goto62 as Connection782
            connect "C function VSG.e" Goto64 as Connection783
            connect Goto50 "C function VSG.p_s" as Connection784
            connect "C function VSG.q_s" Goto51 as Connection785
            connect From95 "C function VSG.time" as Connection828
            connect From97 "Bus Join12.in1" as Connection821
            connect From96 "Bus Join12.in" as Connection822
            connect From98 "Bus Join12.in2" as Connection823
            connect From101 "Bus Join13.in2" as Connection825
            connect "Bus Join13.in1" From100 as Connection826
            connect From99 "Bus Join13.in" as Connection829
            connect "C function VSG.is_dq_ref_fil" Goto65 as Connection856
            connect "C function VSG.is_q" Goto67 as Connection873
            connect "C function VSG.is_d" Goto57 as Connection874
            connect "C function VSG.vs_q" Goto56 as Connection875
            connect "C function VSG.vs_d" Goto66 as Connection876
            connect "Bus Join11.out" Goto53 as Connection841
            connect "Bus Join14.out" Goto52 as Connection842
            connect "Bus Split1.in" From102 as Connection893
            connect Goto68 "Bus Split1.out" as Connection894
            connect "Bus Split1.out1" Goto69 as Connection895
            connect From69 "C function PI current controller.omega_pll" as Connection525
            connect Goto40 "Bus Join8.out" as Connection553
            connect From70 "C function PI current controller.v_dc" as Connection653
            connect From82 "C function PI current controller.time" as Connection896
            connect From67 "C function PI current controller.is_dq" as Connection870
            connect From68 "C function PI current controller.vs_dq" as Connection871
            connect From103 "C function PI current controller.is_dq_ref" as Connection872
            connect "Bus Join11.in" From108 as Connection897
            [
                breakpoints = 7500, 7508
            ]
            connect From111 "Bus Join14.in1" as Connection898
            [
                breakpoints = 7552, 7712
            ]
            connect "C function PI current controller.eta_q" "Bus Join8.in1" as Connection899
            [
                breakpoints = 8456, 7612
            ]
            connect "Bus Join8.in" "C function PI current controller.eta_d" as Connection900
            [
                breakpoints = 8456, 7372
            ]
            connect "Bus Join11.in1" From109 as Connection902
            [
                breakpoints = 7500, 7536
            ]
            connect From110 "Bus Join14.in" as Connection901
            [
                breakpoints = 7556, 7684
            ]
            connect "Bus Join13.out" "Rate Transition3.in" as Connection903
            connect "Rate Transition3.out" "C function VSG.vs_abc" as Connection904
            connect "Bus Join12.out" "Rate Transition4.in" as Connection905
            connect "Rate Transition4.out" "C function VSG.is_abc" as Connection906
            connect p_s From112 as Connection907
            connect q_s From113 as Connection908
        }
        [
            position = 8592, 8460
            size = 256, 416
        ]

        component Subsystem Plant {
            layout = dynamic
            component "core/Constant" C {
                execution_rate = "Tfast"
            }
            [
                position = 7256, 7992
            ]

            component "core/Ground" gnd3 {
            }
            [
                position = 9416, 8552
                hide_name = True
            ]

            component "core/Bus Split" "Bus Split1" {
                execution_rate = "Ts_Control"
                outputs = "3"
            }
            [
                position = 7248, 7920
            ]

            component "core/Voltage Source" Vdc_link {
                init_const_value = "800.0"
                param_set = ""
            }
            [
                position = 6696, 8148
                rotation = right
            ]

            component "core/Capacitor" Cdc {
                capacitance = "2e-3"
            }
            [
                position = 6852, 8144
                rotation = right
            ]

            component "core/Resistor" Rdc {
                resistance = "50e-3"
            }
            [
                position = 6772, 8056
            ]

            component "core/Voltage Measurement" vs_a {
                addr = "7"
                execution_rate = "Ts_Power"
                sig_output = "True"
            }
            [
                position = 9344, 8360
                rotation = right
                scale = -1, 1
                size = 64, 32
            ]

            component "core/Voltage Measurement" vs_b {
                addr = "9"
                execution_rate = "Ts_Power"
                sig_output = "True"
            }
            [
                position = 9416, 8408
                rotation = right
                scale = -1, 1
                size = 64, 32
            ]

            component "core/Voltage Measurement" vs_c {
                addr = "11"
                execution_rate = "Ts_Power"
                sig_output = "True"
            }
            [
                position = 9496, 8456
                rotation = right
                scale = -1, 1
                size = 64, 32
            ]

            component "core/Current Measurement" is_a {
                addr = "14"
                execution_rate = "Ts_Power"
                sig_output = "True"
            }
            [
                position = 8720, 8060
                scale = 1, -1
                size = 64, 32
            ]

            component "core/Current Measurement" is_b {
                addr = "15"
                execution_rate = "Ts_Power"
                sig_output = "True"
            }
            [
                position = 8724, 8156
                scale = 1, -1
                size = 64, 32
            ]

            component "core/Current Measurement" is_c {
                addr = "16"
                execution_rate = "Ts_Power"
                sig_output = "True"
            }
            [
                position = 8716, 8252
                scale = 1, -1
                size = 64, 32
            ]

            component "core/Current Measurement" Idc_link {
                addr = "7"
                execution_rate = "Tfast"
            }
            [
                position = 7052, 8056
                scale = 1, -1
                size = 64, 32
            ]

            component "core/Voltage Measurement" VDC {
                execution_rate = "Tfast"
                sig_output = "True"
            }
            [
                position = 6956, 8152
                rotation = right
                size = 64, 32
            ]

            component "core/Three Phase Inverter" "Three Phase Inverter" {
                carrier_freq = "fs"
                ctrl_src = "Internal modulator"
                d_time = "dt"
                execution_rate = "Ts_Power"
                fvd_def_method = "LUT"
            }
            [
                position = 7340, 8156
                size = 127, 256
            ]

            component "core/Triple Pole Single Throw Contactor" S1 {
                ctrl_src = "Model"
            }
            [
                position = 9128, 8156
                size = 64, 256
            ]

            component "core/Series RLC Branch" "VSC side inductor_Rt_Lt" {
                branch_type = "RL"
                inductance = "Lt"
                num_phases = "Three-Phase"
                resistance = "Rt"
            }
            [
                position = 8136, 8156
                size = 128, 256
            ]

            component "core/Series RLC Branch" "Capacitor and dampin resistor" {
                branch_type = "RC"
                capacitance = "C"
                inductance = "Lt"
                num_phases = "Three-Phase"
                resistance = "Rd"
            }
            [
                position = 8420, 8448
                rotation = right
                size = 128, 256
            ]

            component "core/Series RLC Branch" "Grid side inductor_Rs_Ls" {
                branch_type = "RL"
                inductance = "Ls"
                num_phases = "Three-Phase"
                resistance = "Rs"
            }
            [
                position = 8932, 8156
                size = 128, 256
            ]

            component "core/Current Measurement" it_a {
                addr = "14"
                execution_rate = "Ts_Power"
                sig_output = "True"
            }
            [
                position = 7968, 8060
                scale = 1, -1
                size = 64, 32
            ]

            component "core/Current Measurement" it_b {
                addr = "15"
                execution_rate = "Ts_Power"
                sig_output = "True"
            }
            [
                position = 7972, 8156
                scale = 1, -1
                size = 64, 32
            ]

            component "core/Current Measurement" it_c {
                addr = "15"
                execution_rate = "Ts_Power"
                sig_output = "True"
            }
            [
                position = 7976, 8252
                scale = 1, -1
                size = 64, 32
            ]

            component "core/Voltage Measurement" vt_a {
                addr = "7"
                execution_rate = "Ts_Power"
                sig_output = "True"
            }
            [
                position = 7584, 8340
                rotation = right
                scale = -1, 1
                size = 64, 32
            ]

            component "core/Voltage Measurement" vt_b {
                addr = "7"
                execution_rate = "Ts_Power"
                sig_output = "True"
            }
            [
                position = 7664, 8412
                rotation = right
                scale = -1, 1
                size = 64, 32
            ]

            component "core/Voltage Measurement" vt_c {
                addr = "7"
                execution_rate = "Ts_Power"
                sig_output = "True"
            }
            [
                position = 7756, 8480
                rotation = right
                scale = -1, 1
                size = 64, 32
            ]

            component "core/Ground" gnd5 {
            }
            [
                position = 7668, 8592
                hide_name = True
            ]

            component "core/C function" "C function1" {
                arb_defs = "/*Begin code section*/

/*End code section*/"
                execution_rate = "Ts_Control"
                global_variables = "real theta;"
                init_fnc = "/*Begin code section*/
theta = 0.0;
/*End code section*/"
                input_terminals = "real t;"
                input_terminals_dimensions = "1"
                input_terminals_feedthrough = "True"
                input_terminals_show_labels = "True"
                output_fnc = "/*Begin code section*/
omega = 2.0*M_PI*50.0;
f = omega/(2.0*M_PI);
delta_t = 0.0;
vga =326.5*sin(omega*t);
vgb =326.5*sin(omega*t - 2.0*M_PI/3.0);
vgc = 326.5*sin(omega*t + 2.0*M_PI/3.0);
if (t<1.5){
    omega = 2.0*M_PI*50.0;
}
if (t>=1.5){
    delta_t = t-1.5;
    omega = 2.0*M_PI*50.0 - 2.0*M_PI*0.5*delta_t;
}
if (t>=2.5){
    omega = 2.0*M_PI*49.5;
}

vga =326.5*sin(theta);
vgb =326.5*sin(theta - 2.0*M_PI/3.0);
vgc = 326.5*sin(theta+ 2.0*M_PI/3.0);
/*End code section*/"
                output_terminals = "real vga;real vgb;real vgc;real delta_t;real omega;real f;"
                output_terminals_dimensions = "1;1;1;1;1;1"
                output_terminals_feedthrough = "True;True;True;True;True;True"
                output_terminals_show_labels = "True;True;True;True;True;True"
                parameters = "real Ts_Control;"
                update_fnc = "/*Begin code section*/
theta = theta + Ts_Control*omega;
if (theta>=2*M_PI){
    theta = theta - 2*M_PI;
}
if (theta<0.0){
    theta = theta + abs(theta);
}
/*End code section*/"
            }
            [
                position = 9368, 7676
                size = 224, 288
            ]

            component "core/Scope" omega_f_grid {
                selected_signals = "[\"Plant.omega_grid\", \"Plant.f_grid\"]"
                signals_data = "{\"signals\": {\"Plant.omega_grid\": {\"viewports\": [1], \"type\": \"analog\", \"color\": {\"1\": \"#FF0000\"}, \"display\": {\"1\": \"solid\"}}, \"Plant.f_grid\": {\"viewports\": [2], \"type\": \"analog\", \"color\": {\"2\": \"#FF0000\"}, \"display\": {\"2\": \"solid\"}}}, \"viewports\": {\"1\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"2\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"3\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}, \"4\": {\"log_scale_x\": false, \"log_scale_y\": false, \"y_axis_db\": false}}, \"plot_settings\": {\"layout\": \"Vertical\", \"background_color\": \"white\", \"legend_visible\": true}}"
            }
            [
                position = 9720, 7672
            ]

            component "core/Probe" omega_grid {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
            }
            [
                position = 9576, 7748
            ]

            component "core/Probe" f_grid {
                execution_rate = "Ts_Control"
                signal_access = "Inherit"
            }
            [
                position = 9560, 7796
            ]

            component "core/Termination" Termination1 {
            }
            [
                position = 9560, 7700
            ]

            component "core/Ground" gnd6 {
            }
            [
                position = 9912, 8196
                hide_name = True
            ]

            component "core/Signal Controlled Voltage Source" Vsp1 {
                execution_rate = "Ts_Control"
            }
            [
                position = 9752, 8064
                size = 64, 32
            ]

            component "core/Signal Controlled Voltage Source" Vsp2 {
                execution_rate = "Ts_Control"
            }
            [
                position = 9748, 8160
                size = 64, 32
            ]

            component "core/Signal Controlled Voltage Source" Vsp3 {
                execution_rate = "Ts_Control"
            }
            [
                position = 9744, 8256
                size = 64, 32
            ]

            port eta_abc {
                position = auto:auto
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 7136, 7920
            ]

            port vs_a_out {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 10216, 8044
            ]

            port vs_b_out {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 10212, 8100
            ]

            port vs_c_out {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 10212, 8164
            ]

            port is_a_out {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 10212, 8240
            ]

            port is_b_out {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 10208, 8296
            ]

            port is_c_out {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 10208, 8360
            ]

            port v_dc {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 10216, 8436
            ]

            port contactor {
                position = auto:auto
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 8912, 7960
            ]

            port time {
                position = auto:auto
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 9156, 7676
            ]

            tag Goto22 {
                value = "vs_a"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 9248, 8360
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto23 {
                value = "vs_b"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 9248, 8408
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto24 {
                value = "vs_c"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 9248, 8456
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto25 {
                value = "is_c"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 8628, 8300
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto26 {
                value = "is_b"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 8612, 8204
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto27 {
                value = "is_a"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 8616, 8108
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto42 {
                value = "v_dc"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7052, 8152
                hide_name = True
                size = 60, 20
            ]

            tag Goto43 {
                value = "it_a"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7884, 8116
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto44 {
                value = "it_b"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7888, 8200
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto45 {
                value = "it_c"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7888, 8300
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto46 {
                value = "vt_a"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7492, 8340
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto47 {
                value = "vt_b"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7492, 8408
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto48 {
                value = "vt_c"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7500, 8476
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From57 {
                value = "is_a"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 10100, 8236
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From58 {
                value = "is_b"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 10104, 8296
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From59 {
                value = "is_c"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 10116, 8360
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag From61 {
                value = "vs_a"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 10088, 8052
                hide_name = True
                size = 60, 20
            ]

            tag From62 {
                value = "vs_b"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 10088, 8092
                hide_name = True
                size = 60, 20
            ]

            tag From63 {
                value = "vs_c"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 10092, 8164
                hide_name = True
                size = 60, 20
            ]

            tag From64 {
                value = "v_dc"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 10124, 8436
                rotation = down
                hide_name = True
                scale = -1, 1
                size = 60, 20
            ]

            tag Goto49 {
                value = "vga"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 9556, 7556
                hide_name = True
                size = 60, 20
            ]

            tag Goto50 {
                value = "vgb"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 9552, 7604
                hide_name = True
                size = 60, 20
            ]

            tag Goto51 {
                value = "vgc"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 9556, 7652
                hide_name = True
                size = 60, 20
            ]

            tag From83 {
                value = "vga"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 9660, 8024
                hide_name = True
                size = 60, 20
            ]

            tag From84 {
                value = "vgb"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 9648, 8104
                hide_name = True
                size = 60, 20
            ]

            tag From85 {
                value = "vgc"
                scope = global
                kind = sp
                direction = out
            }
            [
                position = 9660, 8212
                hide_name = True
                size = 60, 20
            ]

            junction Junction150 pe
            [
                position = 6956, 8056
            ]

            junction Junction163 pe
            [
                position = 9416, 8512
            ]

            junction Junction164 pe
            [
                position = 9416, 8512
            ]

            junction Junction173 pe
            [
                position = 6852, 8056
            ]

            junction Junction174 pe
            [
                position = 6852, 8248
            ]

            junction Junction215 pe
            [
                position = 6952, 8248
            ]

            junction Junction219 pe
            [
                position = 8420, 8544
            ]

            junction Junction220 pe
            [
                position = 8324, 8060
            ]

            junction Junction221 pe
            [
                position = 8420, 8156
            ]

            junction Junction222 pe
            [
                position = 8516, 8252
            ]

            junction Junction223 pe
            [
                position = 7644, 8060
            ]

            junction Junction225 pe
            [
                position = 7668, 8156
            ]

            junction Junction226 pe
            [
                position = 7664, 8428
            ]

            junction Junction227 pe
            [
                position = 7760, 8252
            ]

            junction Junction228 pe
            [
                position = 7664, 8520
            ]

            junction Junction229 pe
            [
                position = 9796, 8160
            ]

            junction Junction224 pe
            [
                position = 9796, 8156
            ]

            junction Junction230 pe
            [
                position = 9416, 8160
            ]

            junction Junction231 pe
            [
                position = 9500, 8252
            ]

            junction Junction232 pe
            [
                position = 9344, 8060
            ]

            comment Comment2 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Three Phase Inverter</p></body></html> ENDCOMMENT 
            [
                position = 7592, 7832
            ]

            comment Comment4 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">LCL filter</p></body></html> ENDCOMMENT 
            [
                position = 8348, 7816
            ]

            comment Comment5 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16pt;">Grid</span>   </p></body></html> ENDCOMMENT 
            [
                position = 9648, 7948
            ]

            connect "Bus Split1.out2" "Three Phase Inverter.InC" as Connection5
            connect C.out "Three Phase Inverter.En" as Connection6
            [
                breakpoints = 7312, 8016; 7312, 8016
            ]
            connect Cdc.p_node Junction173 as Connection385
            connect Cdc.n_node Junction174 as Connection388
            connect Goto22 vs_a.out as Connection288
            connect Goto23 vs_b.out as Connection289
            connect Goto24 vs_c.out as Connection290
            connect Junction150 Idc_link.p_node as Connection161
            connect Junction163 gnd3.node as Connection253
            connect Junction164 Junction163 as Connection256
            connect Junction173 Junction150 as Connection384
            connect Junction174 Vdc_link.n_node as Connection387
            connect Rdc.n_node Junction173 as Connection390
            connect "Three Phase Inverter.InB" "Bus Split1.out1" as Connection66
            connect VDC.p_node Junction150 as Connection162
            connect vs_b.n_node Junction163 as Connection252
            connect vs_c.n_node Junction164 as Connection257
            connect Vdc_link.p_node Rdc.p_node as Connection389
            connect Goto27 is_a.out as Connection703
            connect Goto26 is_b.out as Connection704
            connect Goto25 is_c.out as Connection705
            connect Idc_link.n_node "Three Phase Inverter.pos_out" as Connection709
            connect Junction174 Junction215 as Connection710
            connect Junction215 VDC.n_node as Connection711
            connect "Three Phase Inverter.neg_out" Junction215 as Connection712
            connect Goto42 VDC.out as Connection714
            connect "Capacitor and dampin resistor.P3_neg" Junction219 as Connection750
            [
                breakpoints = 8324, 8544
            ]
            connect Junction219 "Capacitor and dampin resistor.P2_neg" as Connection751
            [
                breakpoints = 8420, 8544
            ]
            connect "Capacitor and dampin resistor.P1_neg" Junction219 as Connection752
            connect is_a.p_node Junction220 as Connection753
            connect Junction220 "VSC side inductor_Rt_Lt.P1_neg" as Connection754
            connect "Capacitor and dampin resistor.P3_pos" Junction220 as Connection755
            connect "VSC side inductor_Rt_Lt.P2_neg" Junction221 as Connection756
            connect Junction221 is_b.p_node as Connection757
            connect "Capacitor and dampin resistor.P2_pos" Junction221 as Connection758
            connect is_c.p_node Junction222 as Connection759
            connect Junction222 "VSC side inductor_Rt_Lt.P3_neg" as Connection760
            connect "Capacitor and dampin resistor.P1_pos" Junction222 as Connection761
            connect "Grid side inductor_Rs_Ls.P2_pos" is_b.n_node as Connection762
            connect "Grid side inductor_Rs_Ls.P3_pos" is_c.n_node as Connection763
            connect is_a.n_node "Grid side inductor_Rs_Ls.P1_pos" as Connection764
            connect "Grid side inductor_Rs_Ls.P1_neg" S1.a_in as Connection765
            connect "Grid side inductor_Rs_Ls.P2_neg" S1.b_in as Connection766
            connect "Grid side inductor_Rs_Ls.P3_neg" S1.c_in as Connection767
            connect it_a.n_node "VSC side inductor_Rt_Lt.P1_pos" as Connection769
            connect it_b.n_node "VSC side inductor_Rt_Lt.P2_pos" as Connection771
            connect it_c.n_node "VSC side inductor_Rt_Lt.P3_pos" as Connection773
            connect Goto43 it_a.out as Connection774
            connect Goto44 it_b.out as Connection775
            connect Goto45 it_c.out as Connection776
            connect it_a.p_node Junction223 as Connection777
            connect Junction223 "Three Phase Inverter.a_in" as Connection778
            connect vt_a.p_node Junction223 as Connection779
            [
                breakpoints = 7584, 8344; 7584, 8060
            ]
            connect Goto46 vt_a.out as Connection783
            connect "Bus Split1.out" "Three Phase Inverter.InA" as Connection787
            [
                breakpoints = 7328, 7904
            ]
            connect it_b.p_node Junction225 as Connection788
            connect Junction225 "Three Phase Inverter.b_in" as Connection789
            connect vt_b.p_node Junction225 as Connection790
            connect vs_a.n_node Junction164 as Connection795
            connect vt_b.n_node Junction226 as Connection796
            connect Junction226 vt_a.n_node as Connection797
            [
                breakpoints = 7664, 8520; 7584, 8520
            ]
            connect it_c.p_node Junction227 as Connection799
            connect Junction227 "Three Phase Inverter.c_in" as Connection800
            connect vt_c.p_node Junction227 as Connection801
            connect Goto48 vt_c.out as Connection802
            connect Goto47 vt_b.out as Connection803
            connect vt_c.n_node Junction228 as Connection804
            connect Junction228 Junction226 as Connection805
            connect gnd5.node Junction228 as Connection806
            connect eta_abc "Bus Split1.in" as Connection807
            connect From61 vs_a_out as Connection808
            connect vs_b_out From62 as Connection809
            connect vs_c_out From63 as Connection810
            connect From57 is_a_out as Connection811
            connect From58 is_b_out as Connection812
            connect From59 is_c_out as Connection813
            connect From64 v_dc as Connection814
            connect contactor S1.ctrl_in as Connection815
            connect "C function1.vgc" Goto51 as Connection816
            connect "C function1.vgb" Goto50 as Connection780
            connect omega_grid.in "C function1.omega" as Connection781
            connect f_grid.in "C function1.f" as Connection782
            connect "C function1.vga" Goto49 as Connection817
            connect Termination1.in "C function1.delta_t" as Connection818
            connect Vsp1.n_node Junction229 as Connection768
            [
                breakpoints = 9796, 8064; 9796, 8160
            ]
            connect Junction229 Vsp2.n_node as Connection822
            connect Vsp3.n_node Junction224 as Connection770
            connect Junction224 Junction229 as Connection823
            connect gnd6.node Junction224 as Connection772
            [
                breakpoints = 9912, 8160; 9796, 8160
            ]
            connect From83 Vsp1.in as Connection824
            connect From84 Vsp2.in as Connection825
            connect From85 Vsp3.in as Connection826
            connect vs_b.p_node Junction230 as Connection827
            connect Junction230 S1.b_out as Connection828
            [
                breakpoints = 9416, 8156
            ]
            connect Vsp2.p_node Junction230 as Connection829
            connect S1.c_out Junction231 as Connection830
            connect Junction231 vs_c.p_node as Connection831
            [
                breakpoints = 9500, 8252
            ]
            connect Vsp3.p_node Junction231 as Connection832
            connect vs_a.p_node Junction232 as Connection833
            connect Junction232 S1.a_out as Connection834
            [
                breakpoints = 9344, 8060
            ]
            connect Vsp1.p_node Junction232 as Connection835
            connect time "C function1.t" as Connection836
        }
        [
            position = 8044, 8388
            size = 248, 264
        ]

        component Subsystem SCADA {
            layout = dynamic
            component "core/Probe" is_d_ref {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 7096, 8476
            ]

            component "core/Probe" is_q_ref {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 7104, 8532
            ]

            component "core/Probe" is_d {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 7144, 8696
            ]

            component "core/Probe" is_q {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 7148, 8752
            ]

            component "core/Probe" eta_a {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 7132, 8308
            ]

            component "core/Probe" eta_b {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 7132, 8360
            ]

            component "core/Probe" eta_c {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 7132, 8428
            ]

            component "core/Probe" eta_d {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 7104, 8800
            ]

            component "core/Probe" eta_q {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 7104, 8856
            ]

            component "core/Probe" v_d {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 7100, 8592
            ]

            component "core/Probe" v_q {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 7100, 8652
            ]

            component "core/Bus Split" "Bus Split1" {
                execution_rate = "Ts_scope"
                outputs = "3"
            }
            [
                position = 7016, 8360
            ]

            component "core/Bus Split" "Bus Split2" {
                execution_rate = "Ts_scope"
            }
            [
                position = 7016, 8484
            ]

            component "core/Bus Split" "Bus Split3" {
                execution_rate = "Ts_scope"
            }
            [
                position = 6996, 8608
            ]

            component "core/Bus Split" "Bus Split4" {
                execution_rate = "Ts_scope"
            }
            [
                position = 6996, 8712
            ]

            component "core/Bus Split" "Bus Split5" {
                execution_rate = "Ts_scope"
            }
            [
                position = 7000, 8816
            ]

            component "core/Probe" omega_SCADA {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 6976, 8904
            ]

            component "core/Probe" theta_SCADA {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 6984, 8992
            ]

            component "core/Probe" is_a_SCADA {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
            }
            [
                position = 7684, 8024
            ]

            component "core/Probe" is_b_SCADA {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
            }
            [
                position = 7684, 8088
            ]

            component "core/Probe" is_c_SCADA {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
            }
            [
                position = 7684, 8152
            ]

            component "core/Bus Join" "Bus Join7" {
                execution_rate = "Ts_Control"
            }
            [
                position = 8216, 8176
            ]

            component "core/Probe" p_ref {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 8480, 8080
            ]

            component "core/Probe" q_ref {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 8476, 8276
            ]

            component "core/Rate Transition" "Rate Transition7" {
                execution_rate = "Ts_scope"
            }
            [
                position = 6928, 8360
                size = 32, 32
            ]

            component "core/Rate Transition" "Rate Transition8" {
                execution_rate = "Ts_scope"
            }
            [
                position = 6920, 8480
                size = 32, 32
            ]

            component "core/Rate Transition" "Rate Transition9" {
                execution_rate = "Ts_scope"
            }
            [
                position = 6912, 8612
                size = 32, 32
            ]

            component "core/Rate Transition" "Rate Transition10" {
                execution_rate = "Ts_scope"
            }
            [
                position = 6912, 8712
                size = 32, 32
            ]

            component "core/Rate Transition" "Rate Transition11" {
                execution_rate = "Ts_scope"
            }
            [
                position = 6916, 8816
                size = 32, 32
            ]

            component "core/Rate Transition" "Rate Transition12" {
                execution_rate = "Ts_scope"
            }
            [
                position = 6916, 8904
                size = 32, 32
            ]

            component "core/Rate Transition" "Rate Transition13" {
                execution_rate = "Ts_scope"
            }
            [
                position = 6920, 8992
                size = 32, 32
            ]

            component "core/Rate Transition" "Rate Transition14" {
                execution_rate = "Ts_scope"
            }
            [
                position = 7572, 8024
                size = 32, 32
            ]

            component "core/Rate Transition" "Rate Transition15" {
                execution_rate = "Ts_scope"
            }
            [
                position = 7572, 8088
                size = 32, 32
            ]

            component "core/Rate Transition" "Rate Transition16" {
                execution_rate = "Ts_scope"
            }
            [
                position = 7572, 8152
                size = 32, 32
            ]

            component "core/Rate Transition" "Rate Transition23" {
                execution_rate = "Ts_scope"
            }
            [
                position = 7000, 9072
                size = 32, 32
            ]

            component "core/Rate Transition" "Rate Transition24" {
                execution_rate = "Ts_scope"
            }
            [
                position = 6976, 9160
                size = 32, 32
            ]

            component "core/Probe" p {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
            }
            [
                position = 7072, 9072
            ]

            component "core/Probe" q {
                execution_rate = "Ts_scope"
                signal_access = "Inherit"
                signal_name = "q"
            }
            [
                position = 7064, 9164
            ]

            component "core/Gain" Gain3 {
                gain = "S_b"
            }
            [
                position = 6928, 9072
            ]

            component "core/Gain" Gain4 {
                gain = "S_b"
            }
            [
                position = 6904, 9160
            ]

            component "core/SCADA Input" startFSM {
                execution_rate = "10e-3"
                format = "uint"
                max = "1"
                min = "0"
                signal_access = "Inherit"
                signal_type = "uint"
                unit = ""
            }
            [
                position = 8128, 8600
            ]

            component "core/SCADA Input" startAC {
                execution_rate = "10e-3"
                format = "uint"
                max = "1"
                min = "0"
                signal_access = "Inherit"
                signal_type = "uint"
                unit = ""
            }
            [
                position = 8136, 8720
            ]

            component "core/Rate Transition" "Rate Transition25" {
                execution_rate = "Ts_Control"
            }
            [
                position = 8208, 8600
                size = 32, 32
            ]

            component "core/Rate Transition" "Rate Transition26" {
                execution_rate = "Ts_Control"
            }
            [
                position = 8212, 8720
                size = 32, 32
            ]

            component "core/Probe" breaker {
            }
            [
                position = 8304, 8656
            ]

            component "core/SCADA Input" wires {
                execution_rate = "10e-3"
                format = "uint"
                max = "1"
                min = "0"
                signal_access = "Inherit"
                signal_type = "uint"
                unit = ""
            }
            [
                position = 8136, 8816
            ]

            component "core/Probe" sAC {
            }
            [
                position = 8312, 8792
            ]

            component "core/SCADA Input" interruptor_STATCOM {
                execution_rate = "10e-3"
                format = "uint"
                max = "1"
                min = "0"
                signal_access = "Inherit"
                signal_type = "uint"
                unit = ""
            }
            [
                position = 8136, 8880
            ]

            component "core/Probe" Fault_type {
            }
            [
                position = 8196, 8968
            ]

            component "core/Constant" Constant1 {
                execution_rate = "Ts_Control"
                value = "0"
            }
            [
                position = 8108, 8968
            ]

            component "core/Probe" CTRL {
                signal_access = "Public"
            }
            [
                position = 8376, 8956
            ]

            component "core/SCADA Input" Control {
                execution_rate = "10e-3"
                max = "100"
                min = "0"
                signal_access = "Inherit"
                unit = ""
            }
            [
                position = 8284, 8956
            ]

            component "core/Probe" ctrl {
            }
            [
                position = 8376, 9012
            ]

            component "core/SCADA Input" pref {
                execution_rate = "10e-3"
                signal_access = "Inherit"
                unit = ""
            }
            [
                position = 7952, 8080
            ]

            component "core/SCADA Input" qref {
                execution_rate = "10e-3"
                signal_access = "Inherit"
                unit = ""
            }
            [
                position = 7952, 8252
            ]

            component "core/Rate Transition" "Rate Transition27" {
                execution_rate = "Ts_Control"
            }
            [
                position = 8036, 8252
                size = 32, 32
            ]

            component "core/Rate Transition" "Rate Transition28" {
                execution_rate = "Ts_Control"
            }
            [
                position = 8036, 8080
                size = 32, 32
            ]

            component "core/Probe" iarms {
            }
            [
                position = 7732, 8332
            ]

            component "core/Probe" ibrms {
            }
            [
                position = 7732, 8404
            ]

            component "core/Probe" icrms {
            }
            [
                position = 7732, 8480
            ]

            component "core/RMS value" "RMS value1" {
                filter_en = "True"
                lpf_cutoff = "1000"
            }
            [
                position = 7672, 8332
            ]

            component "core/RMS value" "RMS value3" {
                filter_en = "True"
                lpf_cutoff = "1000"
            }
            [
                position = 7672, 8480
            ]

            component "core/Probe" varms {
            }
            [
                position = 7732, 8580
            ]

            component "core/Probe" vbrms {
            }
            [
                position = 7732, 8652
            ]

            component "core/Probe" vcrms {
            }
            [
                position = 7732, 8728
            ]

            component "core/RMS value" "RMS value4" {
                filter_en = "True"
                lpf_cutoff = "1000"
            }
            [
                position = 7672, 8580
            ]

            component "core/RMS value" "RMS value6" {
                filter_en = "True"
                lpf_cutoff = "1000"
            }
            [
                position = 7672, 8728
            ]

            component "core/RMS value" "RMS value7" {
                filter_en = "True"
                lpf_cutoff = "1000"
            }
            [
                position = 7668, 8404
            ]

            component "core/RMS value" "RMS value8" {
                filter_en = "True"
                lpf_cutoff = "1000"
            }
            [
                position = 7668, 8652
            ]

            component "core/Probe" f_PLL {
                signal_access = "Public"
            }
            [
                position = 7168, 8928
            ]

            component "core/Gain" Gain1 {
                gain = "1/2/np.pi"
            }
            [
                position = 7108, 8928
            ]

            component "core/Gain" Gain5 {
                gain = "1/S_b"
            }
            [
                position = 8096, 8080
            ]

            component "core/Gain" Gain6 {
                gain = "1/S_b"
            }
            [
                position = 8092, 8252
            ]

            port vs_a {
                position = left:1
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6796, 7988
            ]

            port is_c {
                position = left:6
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6804, 8268
            ]

            port vs_b {
                position = left:2
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6796, 8044
            ]

            port is_a {
                position = left:4
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6804, 8156
            ]

            port is_b {
                position = left:5
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6804, 8212
            ]

            port vs_c {
                position = left:3
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6804, 8100
            ]

            port eta_abc {
                position = left:7
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6848, 8360
            ]

            port omega {
                position = left:8
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6848, 8908
            ]

            port is_dq_ref {
                position = left:9
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6844, 8480
            ]

            port is_dq {
                position = left:10
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6840, 8712
            ]

            port eta_dq {
                position = left:11
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6844, 8816
            ]

            port vs_dq {
                position = left:12
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6844, 8612
            ]

            port theta {
                position = left:13
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6848, 8992
            ]

            port time {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8400, 8844
            ]

            port pq_ref {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8308, 8176
            ]

            port contactor {
                position = auto:auto
                kind = sp
                direction =  in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 8332, 8600
            ]

            port p_s {
                position = left:14
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6848, 9076
            ]

            port q_s {
                position = left:15
                kind = sp
                direction =  out
                sp_type {
                    default = auto
                    readonly = True
                }
            }
            [
                position = 6848, 9160
            ]

            tag From75 {
                value = "is_a"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7464, 8024
                hide_name = True
                size = 60, 20
            ]

            tag From76 {
                value = "is_b"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7464, 8088
                hide_name = True
                size = 60, 20
            ]

            tag From77 {
                value = "is_c"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7464, 8152
                hide_name = True
                size = 60, 20
            ]

            tag Goto43 {
                value = "vs_a"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7028, 7988
                hide_name = True
                size = 60, 20
            ]

            tag Goto45 {
                value = "vs_b"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7012, 8040
                hide_name = True
                size = 60, 20
            ]

            tag Goto46 {
                value = "vs_c"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7004, 8104
                hide_name = True
                size = 60, 20
            ]

            tag Goto47 {
                value = "is_a"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7004, 8160
                hide_name = True
                size = 60, 20
            ]

            tag Goto48 {
                value = "is_b"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7000, 8212
                hide_name = True
                size = 60, 20
            ]

            tag Goto49 {
                value = "is_c"
                scope = local
                kind = sp
                direction = in
            }
            [
                position = 7000, 8272
                hide_name = True
                size = 60, 20
            ]

            tag From79 {
                value = "is_a"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7584, 8332
                hide_name = True
                size = 60, 20
            ]

            tag From80 {
                value = "is_b"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7584, 8404
                hide_name = True
                size = 60, 20
            ]

            tag From81 {
                value = "is_c"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7584, 8480
                hide_name = True
                size = 60, 20
            ]

            tag From82 {
                value = "vs_a"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7584, 8580
                hide_name = True
                size = 60, 20
            ]

            tag From83 {
                value = "vs_b"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7584, 8652
                hide_name = True
                size = 60, 20
            ]

            tag From84 {
                value = "vs_c"
                scope = local
                kind = sp
                direction = out
            }
            [
                position = 7584, 8728
                hide_name = True
                size = 60, 20
            ]

            junction Junction8 sp
            [
                position = 8332, 8956
            ]

            junction Junction213 sp
            [
                position = 8252, 8600
            ]

            junction Junction214 sp
            [
                position = 8252, 8792
            ]

            junction Junction215 sp
            [
                position = 8136, 8080
            ]

            junction Junction216 sp
            [
                position = 8128, 8252
            ]

            junction Junction217 sp
            [
                position = 6948, 8904
            ]

            comment Comment8 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><meta charset="utf-8" /><style type="text/css">p, li { white-space: pre-wrap; }hr { height: 1px; border-width: 0; }li.unchecked::marker { content: "\2610"; }li.checked::marker { content: "\2612"; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">PQ references </p></body></html> ENDCOMMENT 
            [
                position = 7952, 8152
            ]

            connect eta_a.in "Bus Split1.out" as Connection745
            connect eta_b.in "Bus Split1.out1" as Connection746
            connect eta_c.in "Bus Split1.out2" as Connection747
            connect is_d_ref.in "Bus Split2.out" as Connection749
            connect is_q_ref.in "Bus Split2.out1" as Connection750
            connect v_d.in "Bus Split3.out" as Connection752
            connect v_q.in "Bus Split3.out1" as Connection753
            connect is_d.in "Bus Split4.out" as Connection755
            connect "Bus Split4.out1" is_q.in as Connection756
            connect eta_d.in "Bus Split5.out" as Connection758
            connect eta_q.in "Bus Split5.out1" as Connection759
            connect vs_a Goto43 as Connection762
            [
                breakpoints = 6976, 7984
            ]
            connect vs_b Goto45 as Connection763
            connect vs_c Goto46 as Connection764
            connect Goto47 is_a as Connection765
            connect is_b Goto48 as Connection766
            connect is_c Goto49 as Connection767
            connect pq_ref "Bus Join7.out" as Connection831
            connect eta_abc "Rate Transition7.in" as Connection850
            connect "Rate Transition7.out" "Bus Split1.in" as Connection851
            connect is_dq_ref "Rate Transition8.in" as Connection852
            connect "Rate Transition8.out" "Bus Split2.in" as Connection853
            connect vs_dq "Rate Transition9.in" as Connection854
            connect "Rate Transition9.out" "Bus Split3.in" as Connection855
            connect is_dq "Rate Transition10.in" as Connection856
            connect "Rate Transition10.out" "Bus Split4.in" as Connection857
            connect eta_dq "Rate Transition11.in" as Connection858
            connect "Rate Transition11.out" "Bus Split5.in" as Connection859
            connect "Rate Transition12.in" omega as Connection861
            connect theta_SCADA.in "Rate Transition13.out" as Connection862
            connect "Rate Transition13.in" theta as Connection863
            connect is_a_SCADA.in "Rate Transition14.out" as Connection864
            connect "Rate Transition14.in" From75 as Connection865
            connect From76 "Rate Transition15.in" as Connection866
            connect "Rate Transition15.out" is_b_SCADA.in as Connection867
            connect From77 "Rate Transition16.in" as Connection868
            connect "Rate Transition16.out" is_c_SCADA.in as Connection869
            connect p.in "Rate Transition23.out" as Connection886
            connect q.in "Rate Transition24.out" as Connection887
            connect "Rate Transition23.in" Gain3.out as Connection888
            connect Gain3.in p_s as Connection889
            connect "Rate Transition24.in" Gain4.out as Connection890
            connect Gain4.in q_s as Connection891
            connect startFSM.out "Rate Transition25.in" as Connection892
            connect startAC.out "Rate Transition26.in" as Connection893
            connect Constant1.out Fault_type.in as Connection837
            connect Control.out Junction8 as Connection874
            connect Junction8 CTRL.in as Connection882
            connect ctrl.in Junction8 as Connection883
            connect breaker.in Junction213 as Connection898
            connect Junction213 "Rate Transition25.out" as Connection899
            [
                breakpoints = 8252, 8600
            ]
            connect contactor Junction213 as Connection900
            connect sAC.in Junction214 as Connection902
            connect Junction214 "Rate Transition26.out" as Connection903
            [
                breakpoints = 8248, 8792; 8252, 8792; 8252, 8720
            ]
            connect time Junction214 as Connection904
            connect qref.out "Rate Transition27.in" as Connection833
            connect "Rate Transition28.in" pref.out as Connection836
            connect Junction215 "Bus Join7.in" as Connection924
            [
                breakpoints = 8132, 8128; 8132, 8168
            ]
            connect p_ref.in Junction215 as Connection925
            connect "Bus Join7.in1" Junction216 as Connection926
            [
                breakpoints = 8128, 8208; 8128, 8208; 8128, 8232
            ]
            connect q_ref.in Junction216 as Connection928
            connect "RMS value1.out" iarms.in as Connection800
            connect From79 "RMS value1.in" as Connection801
            connect "RMS value3.out" icrms.in as Connection802
            connect From81 "RMS value3.in" as Connection804
            connect "RMS value4.out" varms.in as Connection838
            connect From82 "RMS value4.in" as Connection839
            connect "RMS value6.out" vcrms.in as Connection840
            connect From84 "RMS value6.in" as Connection844
            connect "RMS value7.in" From80 as Connection929
            connect "RMS value7.out" ibrms.in as Connection930
            connect "RMS value8.out" vbrms.in as Connection931
            connect "RMS value8.in" From83 as Connection932
            connect f_PLL.in Gain1.out as Connection807
            connect omega_SCADA.in Junction217 as Connection933
            connect Junction217 "Rate Transition12.out" as Connection934
            connect Gain1.in Junction217 as Connection935
            connect "Rate Transition28.out" Gain5.in as Connection936
            connect Gain5.out Junction215 as Connection937
            connect Junction216 Gain6.out as Connection938
            connect Gain6.in "Rate Transition27.out" as Connection939
        }
        [
            position = 9160, 8528
            size = 248, 728
        ]

        tag From44 {
            value = "vs_a"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8940, 8192
            hide_name = True
            size = 60, 20
        ]

        tag From45 {
            value = "vs_b"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8940, 8240
            hide_name = True
            size = 60, 20
        ]

        tag From46 {
            value = "vs_c"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8944, 8288
            hide_name = True
            size = 60, 20
        ]

        tag From47 {
            value = "is_a"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8944, 8336
            rotation = down
            hide_name = True
            scale = -1, 1
            size = 60, 20
        ]

        tag From48 {
            value = "is_b"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8936, 8384
            rotation = down
            hide_name = True
            scale = -1, 1
            size = 60, 20
        ]

        tag From49 {
            value = "is_c"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8940, 8432
            rotation = down
            hide_name = True
            scale = -1, 1
            size = 60, 20
        ]

        tag Goto43 {
            value = "vs_a"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8244, 8292
            hide_name = True
            size = 60, 20
        ]

        tag Goto45 {
            value = "vs_b"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8240, 8324
            hide_name = True
            size = 60, 20
        ]

        tag Goto46 {
            value = "vs_c"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8236, 8356
            hide_name = True
            size = 60, 20
        ]

        tag Goto47 {
            value = "is_a"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8240, 8388
            hide_name = True
            size = 60, 20
        ]

        tag Goto48 {
            value = "is_b"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8244, 8420
            hide_name = True
            size = 60, 20
        ]

        tag Goto49 {
            value = "is_c"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8240, 8452
            hide_name = True
            size = 60, 20
        ]

        tag From57 {
            value = "is_a"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8360, 8412
            rotation = down
            hide_name = True
            scale = -1, 1
            size = 60, 20
        ]

        tag From58 {
            value = "is_b"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8364, 8460
            rotation = down
            hide_name = True
            scale = -1, 1
            size = 60, 20
        ]

        tag From59 {
            value = "is_c"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8364, 8508
            rotation = down
            hide_name = True
            scale = -1, 1
            size = 60, 20
        ]

        tag From61 {
            value = "vs_a"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8356, 8268
            hide_name = True
            size = 60, 20
        ]

        tag From62 {
            value = "vs_b"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8356, 8316
            hide_name = True
            size = 60, 20
        ]

        tag From63 {
            value = "vs_c"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8356, 8364
            hide_name = True
            size = 60, 20
        ]

        tag Goto50 {
            value = "eta_abc"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8784, 8268
            hide_name = True
            size = 60, 20
        ]

        tag From85 {
            value = "eta_abc"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 7836, 8388
            hide_name = True
            size = 60, 20
        ]

        tag Goto42 {
            value = "is_dq_ref"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8784, 8316
            hide_name = True
            size = 60, 20
        ]

        tag Goto35 {
            value = "theta"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8784, 8556
            hide_name = True
            size = 60, 20
        ]

        tag Goto36 {
            value = "omega"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8788, 8508
            hide_name = True
            size = 60, 20
        ]

        tag Goto37 {
            value = "is_dq"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8788, 8412
            hide_name = True
            size = 60, 20
        ]

        tag Goto38 {
            value = "vs_dq"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8784, 8364
            hide_name = True
            size = 60, 20
        ]

        tag Goto40 {
            value = "eta_dq"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8788, 8460
            hide_name = True
            size = 60, 20
        ]

        tag From86 {
            value = "eta_abc"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8940, 8480
            hide_name = True
            size = 60, 20
        ]

        tag From87 {
            value = "omega"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8932, 8528
            hide_name = True
            size = 60, 20
        ]

        tag From88 {
            value = "is_dq_ref"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8936, 8576
            hide_name = True
            size = 60, 20
        ]

        tag From89 {
            value = "is_dq"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8936, 8624
            rotation = down
            hide_name = True
            scale = -1, 1
            size = 60, 20
        ]

        tag From90 {
            value = "eta_dq"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8928, 8672
            rotation = down
            hide_name = True
            scale = -1, 1
            size = 60, 20
        ]

        tag From91 {
            value = "vs_dq"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8928, 8720
            rotation = down
            hide_name = True
            scale = -1, 1
            size = 60, 20
        ]

        tag From92 {
            value = "theta"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8924, 8768
            hide_name = True
            size = 60, 20
        ]

        tag From93 {
            value = "v_dc"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8364, 8556
            rotation = down
            hide_name = True
            scale = -1, 1
            size = 60, 20
        ]

        tag Goto51 {
            value = "v_dc"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8228, 8484
            hide_name = True
            size = 60, 20
        ]

        tag From94 {
            value = "pq_ref"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8368, 8600
            hide_name = True
            size = 60, 20
        ]

        tag From95 {
            value = "time"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8356, 8652
            hide_name = True
            size = 60, 20
        ]

        tag Goto52 {
            value = "time"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 9364, 8876
            hide_name = True
            size = 60, 20
        ]

        tag Goto53 {
            value = "pq_ref"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 9356, 8184
            hide_name = True
            size = 60, 20
        ]

        tag Goto54 {
            value = "contactor"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 9352, 8528
            hide_name = True
            size = 60, 20
        ]

        tag From96 {
            value = "contactor"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 7836, 8496
            hide_name = True
            size = 60, 20
        ]

        tag From97 {
            value = "time"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 7848, 8276
            hide_name = True
            size = 60, 20
        ]

        tag Goto55 {
            value = "p_s"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8788, 8604
            hide_name = True
            size = 60, 20
        ]

        tag Goto56 {
            value = "q_s"
            scope = local
            kind = sp
            direction = in
        }
        [
            position = 8788, 8652
            hide_name = True
            size = 60, 20
        ]

        tag From98 {
            value = "p_s"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8928, 8816
            rotation = down
            hide_name = True
            scale = -1, 1
            size = 60, 20
        ]

        tag From99 {
            value = "q_s"
            scope = local
            kind = sp
            direction = out
        }
        [
            position = 8924, 8864
            hide_name = True
            size = 60, 20
        ]

        comment Comment8 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16pt;">Scope component can be found under TyphoonSim category in the core library. </span></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16pt;">Within it you can select the signals to be visualized,</span></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16pt;">then press Start Simulation button and observe the results. </span><span style=" font-size:18pt;">  </span>                </p></body></html> ENDCOMMENT 
        [
            position = 7988, 8032
        ]

        connect Goto46 Plant.vs_c_out as Connection738
        connect Goto45 Plant.vs_b_out as Connection739
        connect Goto43 Plant.vs_a_out as Connection740
        connect Goto47 Plant.is_a_out as Connection741
        connect Goto48 Plant.is_b_out as Connection742
        connect Goto49 Plant.is_c_out as Connection743
        connect From61 Controller.vs_a as Connection744
        connect From63 Controller.vs_c as Connection746
        connect From57 Controller.is_a as Connection747
        connect From58 Controller.is_b as Connection748
        connect From59 Controller.is_c as Connection749
        connect Goto50 Controller.eta_abc as Connection750
        connect From85 Plant.eta_abc as Connection751
        connect From48 SCADA.is_b as Connection756
        connect From44 SCADA.vs_a as Connection752
        connect From45 SCADA.vs_b as Connection754
        connect From49 SCADA.is_c as Connection753
        connect From47 SCADA.is_a as Connection755
        connect From46 SCADA.vs_c as Connection757
        connect From62 Controller.vs_b as Connection758
        connect Controller.theta Goto35 as Connection759
        connect Controller.omega Goto36 as Connection760
        connect Controller.eta_dq Goto40 as Connection761
        connect Controller.is_dq Goto37 as Connection762
        connect Controller.vs_dq Goto38 as Connection763
        connect Controller.is_dq_ref Goto42 as Connection764
        connect From86 SCADA.eta_abc as Connection765
        connect From92 SCADA.theta as Connection766
        connect From87 SCADA.omega as Connection767
        connect From88 SCADA.is_dq_ref as Connection768
        connect From89 SCADA.is_dq as Connection769
        connect From90 SCADA.eta_dq as Connection770
        connect From93 Controller.v_dc as Connection772
        connect Plant.v_dc Goto51 as Connection773
        connect From91 SCADA.vs_dq as Connection774
        connect From94 Controller.pq_ref as Connection775
        connect From95 Controller.time as Connection776
        connect Goto53 SCADA.pq_ref as Connection777
        connect Goto52 SCADA.time as Connection778
        connect SCADA.contactor Goto54 as Connection779
        connect From96 Plant.contactor as Connection780
        connect From97 Plant.time as Connection781
        connect Goto55 Controller.p_s as Connection782
        connect Goto56 Controller.q_s as Connection783
        connect From98 SCADA.p_s as Connection784
        connect From99 SCADA.q_s as Connection785
    }

    default {
        "core/Bus Join" {
            inputs = "2"
            execution_rate = "inherit"
        }

        "core/Bus Split" {
            outputs = "2"
            execution_rate = "inherit"
        }

        "core/C function" {
            input_terminals = "real in;"
            input_terminals_show_labels = "False;"
            input_terminals_feedthrough = "True;"
            input_terminals_dimensions = "inherit;"
            output_terminals = "real out;"
            output_terminals_show_labels = "False;"
            output_terminals_feedthrough = "True;"
            output_terminals_dimensions = "inherit;"
            output_fnc = ""
            update_fnc = ""
            init_fnc = ""
            global_variables = ""
            parameters = ""
            library_load_type = "Compile-time load"
            dll_file_path = ""
            dll_file_path_full = ""
            arm_a9_file_path = ""
            arm_a9_file_path_full = ""
            arm_a53_file_path = ""
            arm_a53_file_path_full = ""
            h_file_path = ""
            h_file_path_full = ""
            add_src_path = ""
            add_src_path_full = ""
            convert_to_relative_dll = "True"
            convert_to_relative_a = "True"
            convert_to_relative_src = "True"
            arb_defs = ""
            add_macros = ""
            skip_pre_cmpl_check = "False"
            generate_for_hil = "True"
            execution_rate = "inherit"
            _supported_platforms = "[\'generic\']"
            refresh = "refresh"
        }

        "core/Capacitor" {
            signal_access = "inherit"
            capacitance = "1e-6"
            initial_voltage = "0"
            pole_shift_ignore = "False"
            visible = "True"
        }

        "core/Constant" {
            value = "1"
            signal_type = "real"
            execution_rate = "100e-6"
            _tunable = "False"
        }

        "core/Gain" {
            gain = "1"
            multiplication = "Element-wise(K.*u)"
            _tunable = "False"
            execution_rate = "inherit"
        }

        "core/Probe" {
            signal_access = "inherit"
            addr = "0"
            override_signal_name = "False"
            signal_name = ""
            signal_type = "generic"
            streaming_en = "False"
            streaming_er_idx = "0"
            execution_rate = "inherit"
        }

        "core/RMS value" {
            op_mode = "PLL based"
            frequency = "50"
            period_timeout = "0.5"
            period_deadband = "0"
            filter_en = "False"
            lpf_cutoff = "500"
            frequency_src = "Internal"
            execution_rate = "inherit"
        }

        "core/Resistor" {
            resistance = "1"
            param_set = ""
        }

        "core/SCADA Input" {
            signal_access = "inherit"
            addr = "0"
            format = "real"
            override_signal_name = "False"
            signal_name = ""
            signal_type = "real"
            min = "-1e6"
            max = "1e6"
            def_value = "0"
            unit = " "
            execution_rate = "100e-6"
        }

        "core/Scope" {
            signals_data = "{}"
            selected_signals = "[]"
        }

        "core/Termination" {
            execution_rate = "inherit"
        }

        "core/Voltage Source" {
            sig_input = "False"
            type = "signal generator"
            param_set = "1phase"
            parent_label = ""
            dtsm_switch_name = ""
            addr = "0"
            spc_nb = "0"
            execution_rate = "100e-6"
            cpd_visible = "True"
            enable_snb = "False"
            snb_type = "R2"
            R2 = "0.0"
            L1 = "0.1"
            override_signal_name = "False"
            signal_name = ""
            init_source_nature = "Constant"
            init_const_value = "0.0"
            init_rms_value = "0.0"
            init_frequency = "50.0"
            init_phase = "0.0"
        }

        "core/Current Measurement" {
            signal_access = "inherit"
            bw_limit = "False"
            frequency = "10e3"
            comparator_enable = "False"
            operator = "greater"
            threshold = "0"
            cmp_abs_value = "False"
            feed_forward = "false"
            sig_output = "False"
            sig_output_filt_and_full_bw = "False"
            execution_rate = "100e-6"
            addr = "0"
            nd_msr_estimation = "false"
            dev_cpl_msr = "false"
            host_device = "0"
            output_to_device = "0"
            dev_cpl_index = "0"
            dev_cpl_var_nb = "0"
            visible = "True"
            override_signal_name = "False"
            signal_name = ""
        }

        "core/Rate Transition" {
            init_value = "0.0"
            execution_rate = "100e-6"
            _supported_platforms = "[\'generic\']"
        }

        "core/Series RLC Branch" {
            num_phases = "Single-Phase"
            branch_type = "RLC"
            resistance = "10"
            inductance = "10e-3"
            initial_current = "0"
            capacitance = "10e-6"
            initial_voltage = "0"
        }

        "core/Signal Controlled Voltage Source" {
            execution_rate = "inherit"
        }

        "core/Three Phase Inverter" {
            signal_access = "inherit"
            ctrl_src = "Digital input per switch"
            op_mode = "Fixed carrier frequency"
            carrier_freq = "10000.0"
            carr_ph_offset = "0.0"
            d_time = "5e-6"
            ref_sig_min_max = "[-1.0, 1.0]"
            load_mode = "on min"
            execution_rate = "inherit"
            Sa_top = "1"
            Sa_top_logic = "active high"
            Sa_bot = "2"
            Sa_bot_logic = "active high"
            Sb_top = "3"
            Sb_top_logic = "active high"
            Sb_bot = "4"
            Sb_bot_logic = "active high"
            Sc_top = "5"
            Sc_top_logic = "active high"
            Sc_bot = "6"
            Sc_bot_logic = "active high"
            delay_enabled = "False"
            fixed_delay = "1e-6"
            var_delay_lut = "[-10.0, 1e-6, 10.0, 1e-6]"
            preview_var_delay = "Preview"
            Sa_top_I = "False"
            Sa_bot_I = "False"
            Sb_top_I = "False"
            Sb_bot_I = "False"
            Sc_top_I = "False"
            Sc_bot_I = "False"
            fvd = "False"
            losses_estimation = "False"
            fvd_def_method = "Voltage and Resistance"
            Import_igbt_xml = "not selected"
            Import_diode_xml = "not selected"
            Switch_type = "IGBT"
            Vce = "1.3"
            Rce = "0"
            Vd = "1.2"
            Rd = "0"
            i_sw = "[0.0, 6.0, 12.0, 18.0, 24.0]"
            v_sw = "[0.0, 600.0]"
            temp_sw = "[25.0, 50.0, 75.0, 100.0, 125.0]"
            vce_table_out = "[1.3, 1.3, 1.3, 1.3, 1.3]"
            vd_table_out = "[1.2, 1.2, 1.2, 1.2, 1.2]"
            et_on_table_out = "[[0.0, 0.0275e-3, 0.15e-3, 0.275e-3, 0.3e-3], [0.35*3.8e-3, 0.4*3.8e-3, 0.8*3.8e-3, 0.68*3.8e-3, 0.9*3.8e-3], [0.65*3.8e-3, 0.9*3.8e-3, 1.2*3.8e-3, 1.5*3.8e-3, 1.7*3.8e-3], [0.9*3.8e-3, 1.3*3.8e-3, 1.7*3.8e-3, 1.9*3.8e-3, 2.25*3.8e-3], [1.1*3.8e-3, 1.7*3.8e-3, 2.1*3.8e-3, 2.3*3.8e-3, 2.5*3.8e-3]]"
            et_off_table_out = "[[0.0, 0.0275e-3, 0.15e-3, 0.275e-3, 0.3e-3], [0.35*2.1e-3, 0.4*2.1e-3, 0.8*2.1e-3, 0.68*2.1e-3, 0.9*2.1e-3], [0.65*2.1e-3, 0.9*2.1e-3, 1.2*2.1e-3, 1.5*2.1e-3, 1.7*2.1e-3], [0.9*2.1e-3, 1.3*2.1e-3, 1.7*2.1e-3, 1.9*2.1e-3, 2.25*2.1e-3], [1.1*2.1e-3, 1.7*2.1e-3, 2.1*2.1e-3, 2.3*2.1e-3, 2.5*2.1e-3]]"
            ed_off_table_out = "[[0.0, 0.0275e-3, 0.15e-3, 0.275e-3, 0.3e-3], [0.35*2.2e-3, 0.4*2.2e-3, 0.8*2.2e-3, 0.68*2.2e-3, 0.9*2.2e-3], [0.65*2.2e-3, 0.9*2.2e-3, 1.2*2.2e-3, 1.5*2.2e-3, 1.7*2.2e-3], [0.9*2.2e-3, 1.3*2.2e-3, 1.7*2.2e-3, 1.9*2.2e-3, 2.25*2.2e-3], [1.1*2.2e-3, 1.7*2.2e-3, 2.1*2.2e-3, 2.3*2.2e-3, 2.5*2.2e-3]]"
            temp_estimation = "False"
            thermal_networks_type = "Foster"
            switch_Rth = "[0.159, 0.133, 0.120, 0.038]"
            switch_Tth = "[1.1e-1, 1.56e-2, 1.35e-3, 1.51e-4]"
            switch_Cth = "[0.0029, 0.0097, 0.1068, 0.8500]"
            diode_Rth = "[0.159, 0.133, 0.120, 0.038]"
            diode_Tth = "[1.1e-1, 1.56e-2, 1.35e-3, 1.51e-4]"
            diode_Cth = "[0.0029, 0.0097, 0.1068, 0.8500]"
            loss_exec_rate = "100e-6"
            visualize_luts = "Visualize Lookup Tables"
            vout_cmp_pullup_mode = "False"
            vout_cmp_timeout = "5e-6"
            PESB_Optimization = "True"
            show_cnt_out = "False"
            show_monitoring = "False"
            _control_property = "all high"
            pwm_enabling = "False"
            pwm_enable_di = "13"
            pwm_enable_inv = "active high"
            dtv_flag_en = "True"
        }

        "core/Triple Pole Single Throw Contactor" {
            signal_access = "inherit"
            switches_option = "False"
            resistance = "1.0"
            ctrl_src = "Digital input"
            Sa = "1"
            Sa_logic = "active high"
            enable_fb_out = "False"
            fb_out_type = "real"
            execution_rate = "inherit"
            dtsm_switch_name = ""
            initial_state = "off"
            on_delay = "0"
            off_delay = "0"
            switching = "zero current"
            hide_int_meas = "False"
        }

        "core/Voltage Measurement" {
            signal_access = "inherit"
            bw_limit = "False"
            frequency = "10e3"
            comparator_enable = "False"
            operator = "greater"
            threshold = "0"
            cmp_abs_value = "False"
            feed_forward = "false"
            sig_output = "False"
            sig_output_filt_and_full_bw = "False"
            execution_rate = "100e-6"
            addr = "0"
            nd_msr_estimation = "false"
            dev_cpl_msr = "false"
            host_device = "0"
            output_to_device = "0"
            dev_cpl_index = "0"
            dev_cpl_var_nb = "0"
            visible = "True"
            override_signal_name = "False"
            signal_name = ""
        }
    }

    CODE model_init
        # Numpy module is imported as 'np'
        # Scipy module is imported as 'sp'
        Tfast = 50e-6
        Ts_Control = 50e-6
        Ts_Power = 50e-6
        #LPF power
        fc= 30
        # Filter parameter
        Lt=2.5e-3
        Rt=.1
        Ls=2.5e-3
        Rs=.1
        Rd = 27
        C = 1e-6
        # Switching frequency
        fs = 10e3
        #dead time
        dt = 0.1e-6
        
        #PLL control gains
        K_p_pll = 1.8
        K_i_pll = 1.8/0.00251
        
        # PI current controller gains
        tau_c = 1e-3
        L = Ls + Lt
        R = Rs + Rt
        Kp_i = L/tau_c
        Ki_i = R/tau_c
        
        #Ton contactor
        T_on_contactor = 0.1
        
        #VSG
        S_b = 20e3
        U_b = 400
        I_b = S_b/(np.sqrt(3)*U_b)
        I_bdq = I_b*np.sqrt(2)
        U_bdq = U_b*(np.sqrt(2/3))
        
        H = 5.0 # desired virtual inertia 
        Kp_p = 0.01 # active power proportinal gain
        Ki_p = 1.0/(2.0*H) #proportional gain active power control loop
        Kp_q = 0.1
        Ki_q = 10.0
        Xv = 0.1
        Rv = 0.0
        e_o = 1.0
        omega_base = 1.0
        
        #LPF VSG
        tau_vsg = 2.4e-3
        
        Ts_scope = 50e-6
    ENDCODE
}
